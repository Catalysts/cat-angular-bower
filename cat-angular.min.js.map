{"version":3,"sources":["src/js-header.js.tpl","src/controller/cat-base-detail-controller.js","src/controller/cat-base-list-controller.js","src/controller/cat-base-tabs-controller.js","src/directives/cat-select.js","src/service/cat-api-service.js","src/service/cat-breadcrumbs-service.js","src/service/cat-conversion-service.js","src/service/cat-i18n-locale-service.js","src/service/cat-i18n-message-source-service.js","src/service/cat-i18n-service.js","src/service/cat-route-service.js","src/service/cat-select-config-service.js","src/service/cat-view-config-service.js","src/service/cat-view-service.js","src/service/main-menu-service.js","src/module.js","src/base/Facet.js","src/base/SearchRequest.js","src/directives/cat-autofocus.js","src/directives/cat-checkbox.js","src/directives/cat-confirm-click.js","src/directives/cat-facets.js","src/directives/cat-field-errors.js","src/directives/cat-i18n.js","src/directives/cat-inputs.js","src/directives/cat-load-more.js","src/directives/cat-main-menu.js","src/directives/cat-paginated.js","src/directives/cat-sortable.js","src/directives/form.js","src/directives/numbers-only.js","src/filters/cat-replacetext.js","src/i18n/cat-i18n-translations_de.js","src/i18n/cat-i18n-translations_en.js","src/service/cat-list-data-loading-service.js","src/service/cat-search-service.js","src/service/cat-validation-service.js","src/service/http-interceptor.js","src/service/loading-service.js","src/service/message-service.js","src/util/cat-naming-util.js","src/util/cat-route-util.js","src/js-footer.js.tpl"],"names":[],"mappings":"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","file":"cat-angular.min.js","sourcesContent":["/*!\n Copyright 2014-2015 the original author or authors.\n\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n */\n(function (window) {\n    'use strict';\n\n    function catAngular($, _, angular) {","'use strict';\n\n/**\n * @ngdoc controller\n * @name cat.controller.base.detail:CatBaseDetailController\n * @module cat.controller.base.detail\n *\n * @description\n * The CatBaseDetailController takes care of providing several common properties and functions to the scope\n * of every detail page. It also instantiates the controller given via the config.controller parameter and shares\n * the same scope with it.\n *\n * Common properties include:\n * * detail - the actual object to view\n * * editDetail - a copy of the detail object used for editing\n * * breadcrumbs - the breadcrumbs array\n * * uiStack - the ui stack array if parents exist\n * * editTemplate - the url of the edit template\n * * mainViewTemplate - the url of the main view template\n * * additionalViewTemplate - the url of the additional view template if it exists\n *\n * Common functions include:\n * * save - the save function to update / create an object\n * * edit - a function to switch from view to edit mode\n * * cancelEdit - a function to switch from edit to view mode (discarding all changes)\n * * add - a function to switch into edit mode of a new object\n * * remove - a function to delete the current object\n * * title - a function to resolve a 'title' of the current object\n *\n * @param {object} $scope DOCTODO\n * @param {object} $state DOCTODO\n * @param {object} $stateParams DOCTODO\n * @param {object} $location DOCTODO\n * @param {object} $window DOCTODO\n * @param {object} $globalMessages DOCTODO\n * @param {object} $controller DOCTODO\n * @param {object} $log DOCTODO\n * @param {object} catValidationService DOCTODO\n * @param {object} catBreadcrumbsService DOCTODO\n * @param {Object} config holds data like the current api endpoint, template urls, base url, the model constructor, etc.\n */\nfunction CatBaseDetailController($scope, $state, $stateParams, $location, $window, $globalMessages, $controller, $log, catValidationService, catBreadcrumbsService, config) {\n    $scope.detail = config.detail;\n    $scope.editDetail = undefined;\n\n    $scope.config = config;\n    var endpoint = config.endpoint;\n    var templateUrls = config.templateUrls;\n    var Model = config.Model;\n\n    $scope.uiStack = catBreadcrumbsService.generateFromConfig(config);\n\n    if ($stateParams.id === 'new') {\n        catBreadcrumbsService.push({\n            title: 'New',\n            key: 'cc.catalysts.general.new'\n        });\n    } else {\n        catBreadcrumbsService.push({});\n    }\n\n    $scope.editTemplate = templateUrls.edit;\n\n    if (_.isObject(templateUrls.view)) {\n        $scope.mainViewTemplate = templateUrls.view.main;\n        $scope.additionalViewTemplate = templateUrls.view.additional;\n    } else {\n        $scope.mainViewTemplate = templateUrls.view;\n    }\n\n    /**\n     * @returns {String|Number} A title of the current object or the 'id' as fallback\n     */\n    $scope.title = function () {\n        var data = $scope.detail;\n        if (_.isUndefined(data)) {\n            return '';\n        }\n        return !!data.breadcrumbTitle ? data.breadcrumbTitle() : (!!data.name ? data.name : data.id);\n    };\n\n    var update = function () {\n        catBreadcrumbsService.replaceLast({\n            title: $scope.title()\n        });\n    };\n\n    /**\n     * reloads the current object from the server\n     */\n    $scope.reloadDetails = function () {\n        endpoint.get($stateParams.id).then(function (data) {\n            $scope.detail = data;\n            update();\n        });\n    };\n\n    $scope.exists = !!$stateParams.id && $stateParams.id !== 'new';\n\n    /**\n     * Creates a new copy of the given model and sets its parent if applicable.\n     * Triggers a switch into the edit mode\n     */\n    $scope.add = function () {\n        $scope.editDetail = new Model();\n        if (_.isFunction($scope.editDetail.setParent)) {\n            $scope.editDetail.setParent(config.parents[0]);\n        }\n    };\n\n    /**\n     * Creates a copy of the current object and triggers a switch into edit mode\n     */\n    $scope.edit = function () {\n        $scope.editDetail = angular.copy($scope.detail);\n        if (_.isFunction($scope.editDetail.setParent)) {\n            $scope.editDetail.setParent(config.parents[0]);\n        }\n    };\n\n    /**\n     * Either cancels the current edit of an object by resetting it or triggers a history back event if the 'new' mode\n     * is active\n     */\n    $scope.cancelEdit = function () {\n        catValidationService.clearValidationErrors();\n        $scope.$broadcast('formReset');\n        if ($scope.exists) {\n            $scope.editDetail = undefined;\n            $globalMessages.clearMessages();\n        } else {\n            $window.history.back();\n        }\n    };\n\n    /**\n     * Calls the remove function of the current endpoint and redirects to the ^.list upon success\n     */\n    $scope.remove = function () {\n        endpoint.remove($scope.detail.id).then(function () {\n            if (_.isEmpty($scope.uiStack)) {\n                $state.go('^.list');\n            } else {\n                var url = $state.href('^.^');\n                $location.url(url.substring(1, url.length));\n                $location.search('tab', endpoint.getEndpointName());\n            }\n        });\n    };\n\n    /**\n     * Calls the save function of the current endpoint.\n     * Upon success the view mode of the details of the currently created / updated object will be shown.\n     * Upon an error the reported errors (global & field errors) will be shown to the user and the edit mode\n     * will remain active.\n     *\n     * * @param {object} stayInEdit If true the view stays in detail edit state after save instead of switching to\n     *                              detail view state.\n     */\n    $scope.save = function (stayInEdit) {\n        // When passing data to an asynchronous method, it makes sense to clone it.\n        endpoint.save(angular.copy($scope.editDetail)).then(function (data) {\n            $globalMessages.clearMessages();\n            catValidationService.clearValidationErrors();\n            if (stayInEdit){\n                $scope.editDetail = data;\n                // Refresh-Breadcrumb:\n                $scope.reloadDetails();\n            } else {\n                if (!$scope.exists) {\n                    $scope.$broadcast('formReset');\n                    $state.go('.', {id: data.id});\n                } else {\n                    $scope.editDetail = undefined;\n                    $scope.detail = data;\n                    update();\n                }\n            }\n        });\n    };\n\n    // TABS\n    $scope.baseTabsController = ['$scope', function ($tabsScope) {\n        $controller('CatBaseTabsController', {\n            $scope: $tabsScope,\n            config: config\n        });\n    }];\n\n    try {\n        // extend with custom controller\n        $controller(config.controller, {\n            $scope: $scope,\n            detail: config.detail,\n            parents: config.parents,\n            config: config\n        });\n    } catch (unused) {\n        $log.info('Couldn\\'t instantiate controller with name ' + config.controller);\n    }\n\n    if ($scope.exists) {\n        update();\n    } else {\n        $scope.edit();\n    }\n}\n\nangular.module('cat.controller.base.detail').controller('CatBaseDetailController', CatBaseDetailController);","'use strict';\n\n\n/**\n * @ngdoc controller\n * @name cat.controller.base.list:CatBaseListController\n * @module cat.controller.base.list\n *\n * @description\n * The CatBaseListController takes care of providing several common properties to the scope\n * of every list page. It also instantiates the controller given via the config.controller parameter and shares\n * the same scope with it. In addition it has a common template 'cat-base-list.tpl.html' which shows a title,\n * new button and provides the cat-paginated directive.\n *\n * Common properties include:\n * * listData - the listData to be used by cat-paginated\n * * title - the title of the view\n * * searchProps - the list of search properties passed on to the cat-paginated directive\n * * config - the config object used to instantiate this view\n *\n * @param {object} $scope scope\n * @param {object} $state state service\n * @param {object} $controller controller\n * @param {object} $log log\n * @param {object} catBreadcrumbsService catBreadcrumbsService\n * @param {object} catListDataLoadingService catListDataLoadingService\n * @param {object} config holds data like the listData object, the template url, base url, the model constructor, etc.\n */\nfunction CatBaseListController($scope, $state, $controller, $log, catBreadcrumbsService, catListDataLoadingService, config) {\n    if (!_.isUndefined(config.listData)) {\n        this.titleKey = 'cc.catalysts.cat-breadcrumbs.entry.' + config.listData.endpoint.getEndpointName();\n\n        catBreadcrumbsService.set([\n            {\n                title: config.title,\n                key: this.titleKey\n            }\n        ]);\n\n        $scope.listData = config.listData;\n    } else {\n        $log.warn('No listData available!');\n    }\n\n    this.title = config.title;\n    this.searchProps = config.searchProps;\n    this.config = config;\n\n    this.getUrlForId = function (id) {\n        $log.warn('use ui-sref directly - this method will be removed in the near future');\n        return $state.href('^.detail', {id: id});\n    };\n\n    this.getUrlForNewPage = function () {\n        return this.getUrlForId('new');\n    };\n\n    this.remove = function(id) {\n        config.listData.endpoint.remove(id)\n            .then(function() {\n                catListDataLoadingService.load(config.listData.endpoint, config.listData.searchRequest).then(\n                    function (data) {\n                        _.assign($scope.listData, data);\n                    }\n                );\n            });\n    };\n\n    try {\n        // extend with custom controller\n        $controller(config.controller, {$scope: $scope, listData: config.listData, config: config});\n    } catch (unused) {\n        $log.info('Couldn\\'t instantiate controller with name ' + config.controller);\n    }\n}\n\n\nangular.module('cat.controller.base.list')\n    .controller('CatBaseListController',\n    ['$scope', '$state', '$controller', '$log', 'catBreadcrumbsService', 'catListDataLoadingService', 'config', CatBaseListController]);\n","'use strict';\n\n/**\n * @ngdoc controller\n * @name cat.controller.base.tabs:CatBaseTabsController\n * @module cat.controller.base.tabs\n *\n * @description\n * The base code for handling sub entites (as tabs).\n * Includes the instantiation of one controller per tab/list and lazy loading of the approrpiate data\n *\n * @param {Object} $scope The angular scope\n * @param {Object} $controller The angular $controller service\n * @param {Object} $stateParams The ui-router $stateParams service\n * @param {Object} $location The angular $location service\n * @param {Object} config The config as handled by state resolve\n */\nfunction CatBaseTabsController($scope, $controller, $stateParams, $location, config) {\n    var endpoint = config.endpoint;\n\n    $scope.tabs = config.tabs;\n    $scope.tabNames = _.map(config.tabs, 'name');\n    $scope.activeTab = {};\n\n    $scope.activateTab = function (tab) {\n        $scope.$broadcast('tab-' + tab + '-active');\n        _.forEach($scope.tabs, function (currentTab) {\n            $scope.activeTab[currentTab.name] = false;\n        });\n        $scope.activeTab[tab] = true;\n    };\n\n    $scope.selectTab = function (tabName) {\n        if (_.isUndefined($location.search().tab) && tabName === $scope.tabNames[0]) {\n            // don't add 'default' tab to url\n            return;\n        }\n        $location.search('tab', tabName);\n    };\n\n    var isTabActive = function (tab) {\n        if (tab.name === $scope.tabNames[0] && _.isUndefined($stateParams.tab)) {\n            // first tab is active if no parameter is given\n            return true;\n        }\n        return $stateParams.tab === tab.name;\n    };\n\n    $scope.$watchCollection(function () {\n        return $location.search();\n    }, function (newValue) {\n        if (_.isString(newValue.tab)) {\n            $scope.activateTab(newValue.tab);\n        } else if (_.isUndefined(newValue.tab)) {\n            // activate first tab if undefined\n            $scope.activateTab($scope.tabNames[0]);\n        }\n    });\n\n    $scope.getTabName = function (tab) {\n        return window.cat.util.pluralize(window.cat.util.capitalize(tab));\n    };\n\n    _.forEach($scope.tabs, function (tab) {\n        $scope.activeTab[tab.name] = isTabActive(tab);\n    });\n\n    // TODO replace by url resolver service as soon as it is available\n    var parentUrl = endpoint.getEndpointName();\n    var parentTemplateNamePrefix = endpoint.getEndpointName();\n\n    var currentEndpoint = endpoint;\n\n    while (!_.isUndefined(currentEndpoint.parentEndpoint)) {\n        currentEndpoint = endpoint.parentEndpoint;\n        var parentEndpointName = currentEndpoint.getEndpointName();\n\n        parentUrl = parentEndpointName + '/' + parentUrl;\n\n        parentTemplateNamePrefix = parentEndpointName + '-' + parentTemplateNamePrefix;\n    }\n\n    $scope.getTabTemplate = function (tab) {\n        return parentUrl + '/' + tab + '/' + parentTemplateNamePrefix + '-' + tab + '-list.tpl.html';\n    };\n\n    var _getDefaultTabControllerName = function (tab) {\n        return window.cat.util.capitalize(endpoint.getEndpointName()) + window.cat.util.capitalize(tab.name) + 'Controller';\n    };\n\n    var _getTabControllerName = function (tab) {\n        if (!!tab.controller) {\n            return tab.controller;\n        }\n\n        return _getDefaultTabControllerName(tab);\n    };\n\n    var tabIndex = 0;\n\n    $scope.tabController = ['$scope', 'catListDataLoadingService', function ($tabScope, catListDataLoadingService) {\n        var activeTab = $scope.tabs[tabIndex++];\n        var tabControllerName = _getTabControllerName(activeTab);\n\n        $tabScope.getSearchRequest = function () {\n            return new window.cat.SearchRequest();\n        };\n\n        $tabScope.getEndpoint = function () {\n            return config.detail[activeTab.name];\n        };\n\n        $tabScope.loadListData = function () {\n            catListDataLoadingService.load($tabScope.getEndpoint(), $tabScope.getSearchRequest()).then(function (data) {\n                $tabScope.listData = data;\n            });\n        };\n\n        $tabScope.$on('tab-' + activeTab.name + '-active', function () {\n            if (_.isUndefined($scope.listData)) {\n                $tabScope.loadListData();\n            }\n        });\n\n        $controller(tabControllerName, {\n            $scope: $tabScope,\n            detail: config.detail,\n            parents: config.parents,\n            config: config\n        });\n\n        if ($scope.activeTab[activeTab.name] === true) {\n            $scope.activateTab(activeTab.name);\n        }\n    }];\n}\n\nangular.module('cat.controller.base.tabs').controller('CatBaseTabsController', CatBaseTabsController);","'use strict';\n\nfunction CatSelectLink(scope, element) {\n    element.addClass('form-control');\n}\n\nvar fetchElements = function (endpoint, sort) {\n    return function (queryParams) {\n        var searchRequest = new window.cat.SearchRequest(queryParams.data);\n        searchRequest.sort(sort || { property: 'name', isDesc: false });\n        return endpoint.list(searchRequest).then(queryParams.success);\n    };\n};\n\nfunction CatSelectController($scope, $log, catApiService, catSelectConfigService) {\n\n    var options = catSelectConfigService.getConfig($scope.config, $scope.options);\n\n    if (_.isUndefined(options)) {\n        throw new Error('At least one of \"config\" or \"options\" has to be specified');\n    }\n\n    var transport,\n        quietMillis,\n        searchRequestFunc = options.search || function (term, page) {\n            return {\n                'search.name': term,\n                page: page\n            };\n        },\n        filterFunc = options.filter || function (term) {\n            return true;\n        };\n    if (_.isArray(options.endpoint)) {\n        transport = function (queryParams) {\n            return queryParams.success({\n                elements: options.endpoint\n            });\n        };\n        quietMillis = 0;\n    } else if (_.isFunction(options.endpoint)) {\n        transport = options.endpoint;\n        quietMillis = 500;\n    } else if (_.isObject(options.endpoint)) {\n        transport = fetchElements(options.endpoint, options.sort);\n        quietMillis = 500;\n    } else if (_.isString(options.endpoint)) {\n        var api = catApiService[options.endpoint];\n        if (!api) {\n            $log.error('No api endpoint \"' + options.endpoint + '\" defined');\n            $scope.elements = [];\n            return;\n        }\n        transport = fetchElements(api, options.sort);\n        quietMillis = 500;\n    } else {\n        $log.error('The given endpoint has to be one of the following types: array, object, string or function - but was ' + (typeof options.endpoint));\n        $scope.elements = [];\n        return;\n    }\n\n    $scope.selectOptions = _.assign({\n        placeholder: ' ', // space in default placeholder is required, otherwise allowClear property does not work\n        minimumInputLength: 0,\n        adaptDropdownCssClass: function (cssClass) {\n            if (_.contains(['ng-valid', 'ng-invalid', 'ng-pristine', 'ng-dirty'], cssClass)) {\n                return cssClass;\n            }\n            return null;\n        },\n        ajax: {\n            data: searchRequestFunc,\n            quietMillis: quietMillis,\n            transport: transport,\n            results: function (data, page) {\n                var more = (page * options.size || 100) < data.totalCount;\n                return {\n                    results: _.filter(data.elements, filterFunc),\n                    more: more\n                };\n            }\n        },\n        formatResult: function (element) {\n            return element.name;\n        },\n        formatSelection: function (element) {\n            return element.name;\n        }\n    }, options['ui-select2']);\n}\n\n/**\n * @ngdoc directive\n * @name cat.directives.select:catSelect\n * @scope\n * @restrict EA\n *\n * @description\n * The 'cat-select' directive is a wrapper around the 'ui-select2' directive which adds support for using an api\n * endpoint provided by catApiService. There exist 2 supported ways of configuration:\n * - The 'config' attribute: This represents a named configuration which will be retrieved from the catSelectConfigService\n * - The 'options' attribute: Here the options object can directly be passed in\n *\n * The 2 different approaches exist to easily reuse certain options, as the named config is seen as 'default' and all\n * values which are provided via the options object will be overridden.\n *\n * An config / options object has the following properties:\n * - endpoint: This can either be an array, in which case it will directly be treated as the source, an endpoint name\n * or an endpoint object to call the given endpoint, or a function which is used as the 'transport' function\n * - sort: An object which defines the 'sort' property and direction used when retrieving the list from an endpoint\n * - ui-select2: An config object which supports all options provided by the 'ui-select2' directive\n *\n * TODO fix returns doc (not the correct format)\n * returns {{\n *      restrict: {string},\n *      replace: {boolean},\n *      priority: {number},\n *      scope: {\n *          options: {string},\n *          id: {string},\n *          config: {string}\n *      },\n *      link: {CatSelectLink},\n *      controller: {CatSelectController},\n *      template: {string}\n * }}\n * @constructor\n */\nfunction CatSelectDirective() {\n    return {\n        restrict: 'EA',\n        replace: true,\n        priority: 1,\n        scope: {\n            options: '=?',\n            id: '@',\n            config: '@?'\n        },\n        link: CatSelectLink,\n        controller: CatSelectController,\n        template: '<input type=\"text\" ui-select2=\"selectOptions\">'\n    };\n}\n\nangular.module('cat.directives.select')\n    .directive('catSelect', CatSelectDirective);\n","'use strict';\n\n/**\n * @name CatApiEndpoint\n *\n * @description\n * A CatApiEndpoint wraps several helper functions to easily execute backend calls for the base CRUD operations.\n * It also adds support for 'children' which can only be used by resolving them for a parent id.\n * @param {string} url the base url which is added before the configured urls\n * @param {object} endpointConfig the configuration of this endpoint - holds properties like name, url, the model and children\n * @param {object} $http the angular $http service which handles the actual xhr requests\n * @param {object} catConversionService the catConversionService used to convert from and to server side data\n * @param {object} catSearchService the catSearchService for handling all operations concerning cat.uitl.SearchRequest objects\n * @constructor\n */\nfunction CatApiEndpoint(url, endpointConfig, $http, catConversionService, catSearchService) {\n    var that = this;\n\n    var _endpointName = endpointConfig.name;\n    var config = endpointConfig.config;\n    var _endpointUrl = url + (config.url || endpointConfig.name);\n    var _childEndpointSettings = endpointConfig.children;\n\n    /**\n     * This helper function initializes all configured child endpoints by creating the appropriate url by appending\n     * the given id before initializing them.\n     * @return {object} a object holding all resolved child endpoints for the given id\n     * @private\n     */\n    var _res = _.memoize(function (id) {\n        var url = _endpointUrl + '/' + id + '/';\n        var ret = {};\n        _.forEach(_.keys(_childEndpointSettings), function (path) {\n            ret[path] = new CatApiEndpoint(url, _childEndpointSettings[path], $http, catConversionService, catSearchService);\n            ret[path].parentEndpoint = that;\n            ret[path].parentId = id;\n            ret[path].parentInfo = function () {\n                return that.info(id);\n            };\n        });\n        return ret;\n    });\n\n    var _addChildEndpoints = function (data) {\n        _.merge(data, _res(data.id));\n    };\n\n    /**\n     * This helper method initializes a new instance of the configured model with the given data and adds all child\n     * endpoints to it.\n     * @param data the data received from the backend which is used to initialize the model\n     * @return {Object} an instance of the configured model initialized with the given data and the resolved child\n     * endpoints\n     * @private\n     */\n    var _mapResponse = function (data) {\n        var object = catConversionService.toClient(data, config);\n\n        if (!_.isUndefined(object.id)) {\n            _addChildEndpoints(object);\n        }\n\n        if (_.isArray(object)) {\n            _.forEach(object, _addChildEndpoints);\n        }\n\n        if (_.isArray(object.elements)) {\n            _.forEach(object.elements, _addChildEndpoints);\n        }\n\n        return object;\n    };\n\n    /**\n     * This helper methods deletes all child endpoints from the given object.\n     * @param {object} object the object to remove the child endpoints from\n     * @return {object} the passed in object without the child endpoints\n     * @private\n     */\n    var _removeEndpoints = function (object) {\n        var endpoints = _res(object.id);\n        _.forEach(_.keys(endpoints), function (key) {\n            delete object[key];\n        });\n        return object;\n    };\n\n    /**\n     * This helper method turns a cat.SearchRequest in to en url encoded search query\n     * @param {window.cat.SearchRequest} [searchRequest] the search request which should be url encoded\n     * @return {string} either the url encoded search query or an empty string if no search request is given or it is not a instance of cat.SearchRequest\n     * @private\n     */\n    var _getSearchQuery = function (searchRequest) {\n        if (!!searchRequest && searchRequest instanceof window.cat.SearchRequest) {\n            return '?' + catSearchService.encodeAsUrl(searchRequest);\n        }\n\n        return '';\n    };\n\n    /**\n     * This method is used to instantiate actual child api endpoints which are dependent on a certain parent id\n     * @param id the id for which to 'resolve' the child endpoints.\n     * @return {object} a object which maps all child endpoint names to the actual endpoints where the url was resolved\n     * with the provided id\n     */\n    this.res = function (id) {\n        return _res(id);\n    };\n\n    /**\n     * A small helper function to retrieve the actual url this endpoint resolved to.\n     * @return {string} the resolved url of this endpoint\n     */\n    this.getEndpointUrl = function () {\n        return _endpointUrl;\n    };\n\n    /**\n     * A small helper to retrieve the name of the endpoint.\n     * @return {string} the name of this endpoint\n     */\n    this.getEndpointName = function () {\n        return _endpointName;\n    };\n\n    /**\n     * This function calls the url available via #getEndpointUrl without further modification apart from adding search\n     * parameters if the searchRequest parameter is provided. It can handle either an array response in which case all\n     * elements will be mapped to the appropriate configured model or a 'paginated' result in which case an object\n     * with totalCount, facests and elements will be returned.\n     *\n     * @param {SearchRequest} [searchRequest] if given searchRequest#urlEncoded() will be added to the request url\n     * @return {[{object}]|{totalCount: {Number}, facets: [{Facet}], elements: []}} a promise wrapping either a list of\n     * instances of the configured model or a wrapper object which holds not only the list but pagination information\n     * as well\n     */\n    this.list = function (searchRequest) {\n        return $http.get(_endpointUrl + _getSearchQuery(searchRequest)).then(function (response) {\n            return _mapResponse(response.data);\n        });\n    };\n\n    /**\n     * A helper function which adds '/all' to the request url available via #getEndpointUrl and maps the response to\n     * the configured model.\n     * @return [{object}] a promise wrapping an array of new instances of the configured model initialized with the data retrieved from\n     * the backend\n     */\n    this.all = function () {\n        return $http.get(_endpointUrl + '/all').then(function (response) {\n            return _.map(response.data, function (elem) {\n                return _mapResponse(elem);\n            });\n        });\n    };\n\n    /**\n     * This method makes a GET request to the url available via #getEndpointUrl with the addition of the provided id at the end.\n     * @param id the id which will be appended as '/:id' to the url\n     * @return {object} a promise wrapping a new instance of the configured model initialized with the data retrieved\n     * from the backend\n     */\n    this.get = function (id) {\n        return $http.get(_endpointUrl + '/' + id).then(function (response) {\n            return _mapResponse(response.data);\n        });\n    };\n\n\n    /**\n     * This method makes a GET the url available via #getEndpointUrl with the addition of the provided id at the end + the\n     * 'info' request parameter.\n     * @param id the id which will be appended as '/:id' to the url\n     * @return {*} a promise wrapping the data retrieved from the backend\n     */\n    this.info = function (id) {\n        return $http.get(_endpointUrl + '/' + id + '?info').then(function (response) {\n            return response.data;\n        });\n    };\n\n\n    /**\n     * This method is either makes a PUT or POST request to the backend depending on wheter or not the given object\n     * has an 'id' attribute.\n     * For PUT requests the url resolves to #getEndpointUrl + /:id, for POST requests it is just the #getEndpointUrl\n     * @param {object} object the object which should be sent to the sever. it is stripped of all child endpoints before\n     * it is sent.\n     * @return {object} a promise wrapping a new instance of the configured model initialized with the data retrieved\n     * from the backend\n     */\n    this.save = function (object) {\n        if (!!object.id) {\n            return $http.put(_endpointUrl + '/' + object.id, _removeEndpoints(object)).then(function (response) {\n                return _mapResponse(response.data);\n            });\n        } else {\n            return $http.post(_endpointUrl, _removeEndpoints(object)).then(function (response) {\n                return _mapResponse(response.data);\n            });\n        }\n    };\n\n    /**\n     * This method executes a DELETE request to the url available via #getEndpointUrl with the addition of the provided url at the end.\n     * @param url the url to be appended to the endpoint url - usually only the id of the object to delete\n     * @return {*} The promise returned by the $http 'DELETE' call\n     */\n    this.remove = function (url) {\n        return $http({method: 'DELETE', url: _endpointUrl + '/' + url});\n    };\n\n    /**\n     * Simple wrapper object which contains the custom get, put and post methods\n     * @type {{}}\n     */\n    this.custom = {};\n\n    /**\n     * This method executes a GET request to the url available via #getEndpointUrl joined with the provided one.\n     * Be aware that the result of the promise will not be mapped to the configured model but instead will be passed on directly.\n     * @param url the url to be appended to the endpoint url\n     * @param searchRequest an optional cat.SearchRequest to be applied to the request\n     * @return {*} The promise returned by the $http.get call\n     */\n    this.custom.get = function (url, searchRequest) {\n        return $http.get([_endpointUrl, url].join('/') + _getSearchQuery(searchRequest));\n    };\n\n    /**\n     * This method executes a POST request to the url available via #getEndpointUrl joined with the provided one.\n     * Be aware that the result of the promise will not be mapped to the configured model but instead will be passed on directly.\n     * @param url the url to be appended to the endpoint url\n     * @param object hte object to send as payload - not that it will be used as is for this request\n     * @return {*} The promise returned by the $http.post call\n     */\n    this.custom.post = function (url, object) {\n        return $http.post([_endpointUrl, url].join('/'), object);\n    };\n\n    /**\n     * This method executes a PUT request to the url available via #getEndpointUrl joined with the provided one.\n     * Be aware that the result of the promise will not be mapped to the configured model but instead will be passed on directly.\n     * @param url the url to be appended to the endpoint url\n     * @param object hte object to send as payload - not that it will be used as is for this request\n     * @return {*} The promise returned by the $http.put call\n     */\n    this.custom.put = function (url, object) {\n        return $http.put([_endpointUrl, url].join('/'), object);\n    };\n}\n\n/**\n * @ngdoc service\n * @name EndpointConfig\n *\n * @description\n * An 'EndpointConfig' basically is a wrapper around the configuration for an api endpoint during the configuration\n * phase which is later used to instantiate the actual CatApiEndpoints. It exposes its name, the configuration itself,\n * as well as a map of all its children and helper function to create or receive child endpoint configurations.\n *\n * @param {string} name the name of the endpoint\n * @param {object} config the api endpoint configuration which basically wraps an 'url' and a 'model' attribute.\n * If a 'children' attribute is present as well it will be used to create the appropriate child endpoints automatically,\n * without the need to call the #child method manually - this works to arbitrary deps.\n * @constructor\n */\nfunction EndpointConfig(name, config) {\n    var that = this;\n    this.config = config || {};\n    this.children = {};\n    this.name = name;\n\n    /**\n     * This method method either returns or creates and returns a child api endpoint of the current one.\n     *\n     * @param {string} childName the name of the child endpoint\n     * @param {object} [childConfig] if given a new EndpointConfig will be created as a child of the current one. The\n     * parent property of the created config will point to the current config\n     * @return {EndpointConfig} the child endpoint config with the given name\n     */\n    this.child = function (childName, childConfig) {\n        if (!_.isUndefined(childConfig)) {\n            this.children[childName] = new EndpointConfig(childName, childConfig);\n            this.children[childName].parent = this;\n        }\n\n        return this.children[childName];\n    };\n\n    // this takes care of mapping the 'old' config style to the new builder style\n    if (!_.isUndefined(this.config.children)) {\n        var childrenConfig = this.config.children;\n        delete this.config.children;\n        _.forEach(_.keys(childrenConfig), function (childName) {\n            that.child(childName, childrenConfig[childName]);\n        });\n    }\n}\n\n// this is saved outside so that both $api and catApiService use the same config - will be moved back inside\n// CatApiServiceProvider in a future release\nvar _endpoints = {};\n\nfunction CatApiServiceProvider() {\n    var _urlPrefix = '/api/';\n\n    /**\n     * This method is used to either create or retrieve named endpoint configurations.\n     * @param {string} name the name of the api endpoint to create or retrieve the configuration for\n     * @param {object} [settings] if given a new {EndpointConfig} will be created with the given settings\n     * @return {EndpointConfig} the endpoint config for the given name\n     */\n    this.endpoint = function (name, settings) {\n        if (!_.isUndefined(settings)) {\n            _endpoints[name] = new EndpointConfig(name, settings);\n        }\n        return _endpoints[name];\n    };\n\n\n    this.$get = ['$http', 'catConversionService', 'catSearchService',\n        /**\n         * @return {object} returns a map from names to CatApiEndpoints\n         */\n            function $getCatApiService($http, catConversionService, catSearchService) {\n            var catApiService = {};\n\n            var dynamicEndpoints = {};\n\n            /**\n             * This method allows to define (dynamic) endpoints after the configuration phase.\n             * @param {string} name (optional the name of the api endpoint to create or retrieve the configuration for\n             * @param {object} [settings] if given a new {EndpointConfig} will be created with the given settings\n             * @returns {CatApiEndpoint}\n             */\n            catApiService.dynamicEndpoint = function (name, settings) {\n                if (typeof name === 'object' && _.isUndefined(settings)) {\n                    settings = name;\n                    name = settings.url;\n                }\n                if (_.isUndefined(dynamicEndpoints[name])) {\n                    if (_.isUndefined(settings)) {\n                        throw new Error('Undefined dynamic endpoint settings');\n                    }\n                    dynamicEndpoints[name] = new CatApiEndpoint(_urlPrefix,\n                        new EndpointConfig(name, settings), $http, catConversionService, catSearchService);\n                }\n                return dynamicEndpoints[name];\n            };\n\n            _.forEach(_.keys(_endpoints), function (path) {\n                catApiService[path] = new CatApiEndpoint(_urlPrefix, _endpoints[path], $http, catConversionService, catSearchService);\n            });\n\n            return catApiService;\n        }];\n}\n\n/**\n * @ngdoc service\n * @name cat.service.api:$api\n *\n * @description\n * The CatApiServiceProvider exposes a single configuration method 'endpoint' which can be used to create or retrieve\n * named endpoint configurations.\n *\n * @constructor\n */\nangular.module('cat.service.api').provider('catApiService', CatApiServiceProvider);\n\n/**\n * @ngdoc service\n * @name cat.service.api:$api\n * @deprecated use 'catApiService'\n *\n * @description\n * deprecated use 'catApiService'\n * The CatApiServiceProvider exposes a single configuration method 'endpoint' which can be used to create or retrieve\n * named endpoint configurations.\n *\n * @constructor\n */\n// $api is deprecated, will be removed in a future release\nangular.module('cat.service.api').provider('$api', CatApiServiceProvider);\n","'use strict';\n\n\n/**\n * @ngdoc service\n * @name cat.service.breadcrumbs:catBreadcrumbService\n * @service\n *\n * @description\n * This service is a simple wrapper around a list of Objects.\n * It provides some convenience methods for manipulating the list.\n * It's main purpose is to make breadcrumb handling less cumbersome.\n *\n * @constructor\n */\nfunction CatBreadcrumbsService(catBreadcrumbs, $state) {\n    var that = this;\n\n    this.clear = function () {\n        catBreadcrumbs.length = 0;\n    };\n\n    this.set = function (bcs) {\n        that.clear();\n        _.forEach(bcs, function (bc) {\n            catBreadcrumbs.push(bc);\n        });\n    };\n\n    this.get = function () {\n        return catBreadcrumbs;\n    };\n\n    this.addFirst = function (entry) {\n        catBreadcrumbs.unshift(entry);\n    };\n\n    this.removeFirst = function () {\n        return catBreadcrumbs.shift();\n    };\n\n    this.push = function (entry) {\n        catBreadcrumbs.push(entry);\n    };\n\n    this.pop = function () {\n        return catBreadcrumbs.pop();\n    };\n\n    this.length = function () {\n        return catBreadcrumbs.length;\n    };\n\n    function capitalize(string) {\n        return string.charAt(0).toUpperCase() + string.substring(1);\n    }\n\n    this.replaceLast = function (newVal) {\n        catBreadcrumbs[catBreadcrumbs.length - 1] = newVal;\n    };\n\n    /**\n     * This method auto-generates the breadcrumbs from a given view configuration\n     * @param {Object} config a config object as provided to CatBaseDetailController\n     * @return {Array} an array which represents the 'ui stack' of directly related parents\n     */\n    this.generateFromConfig = function (config) {\n        that.clear();\n        var uiStack = [];\n\n        var currentState = $state.$current.parent;\n        var currentEndpoint = config.endpoint;\n        var count = 0;\n        var parents = '^';\n\n        while (!!currentState && !!currentState.parent) {\n            var stateName = currentState.name;\n\n            if (!/\\.tab$/g.test(stateName)) {\n                var href = $state.href(parents);\n\n                var breadcrumb = {};\n\n                if (config.parents.length > count) {\n                    var parent = config.parents[count++];\n                    var regex = new RegExp('/' + window.cat.util.pluralize(currentEndpoint.getEndpointName()) + '$');\n                    href = href.replace(regex, '?tab=' + currentEndpoint.getEndpointName());\n\n                    breadcrumb = {\n                        url: href,\n                        title: parent.name\n                    };\n\n                    uiStack.unshift(breadcrumb);\n                } else {\n                    breadcrumb = {\n                        title: capitalize(window.cat.util.pluralize(currentEndpoint.getEndpointName())),\n                        key: 'cc.catalysts.cat-breadcrumbs.entry.' + currentEndpoint.getEndpointName(),\n                        url: href\n                    };\n                }\n\n                that.addFirst(breadcrumb);\n                currentEndpoint = currentEndpoint.parentEndpoint;\n            }\n\n            currentState = currentState.parent;\n            parents += '.^';\n        }\n        return uiStack;\n    };\n}\n\nangular.module('cat.service.breadcrumbs')\n\n/**\n * @ngdoc overview\n * @name cat.service.breadcrumbs:catBreadcrumbs\n */\n    .value('catBreadcrumbs', [])\n    .service('catBreadcrumbsService', CatBreadcrumbsService);","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.conversion:catConversionService\n * @module cat.service.conversion\n *\n * @description\n * This service handles the transformation between server and client side data.\n *\n * @constructor\n */\nfunction CatConversionService(catConversionFunctions) {\n    this.toClient = function (serverData, context) {\n        return catConversionFunctions.toClient(serverData, context);\n    };\n\n    this.toServer = function (clientData) {\n        return catConversionFunctions.toServer(clientData);\n    };\n}\n\nfunction _convertToClientModel(data, context) {\n    if (!_.isUndefined(context) && _.isFunction(context.model)) {\n        return new context.model(data);\n    }\n\n    return data;\n}\n\nfunction _convertToClientData(serverData, context) {\n    if (_.isUndefined(serverData)) {\n        return undefined;\n    }\n\n    if (_.isArray(serverData)) {\n        return _.map(serverData, function (data) {\n            return _convertToClientModel(data, context);\n        });\n    }\n\n    if (_.isNumber(serverData.totalCount)) {\n        var copy = _.clone(serverData);\n        var facets = [];\n\n        if (!!serverData.facets) {\n            facets = _.map(serverData.facets, function (facet) {\n                return new window.cat.Facet(facet);\n            });\n        }\n\n        var result = {\n            totalCount: serverData.totalCount,\n            facets: facets,\n            elements: _.map(serverData.elements, function (elem) {\n                return _convertToClientData(elem, context);\n            })\n        };\n\n        delete copy.totalCount;\n        delete copy.elements;\n        delete copy.facets;\n\n        return _.assign(result, copy);\n    }\n\n    if (!_.isUndefined(context)) {\n        return _convertToClientModel(serverData, context);\n    }\n\n    return serverData;\n}\n\n\nangular.module('cat.service.conversion')\n/**\n * @ngdoc object\n * @name cat.service.conversion:catConversionFunctions\n * @module cat.service.conversion\n *\n * @description\n * Value holding functions used by {@link cat.service.conversion:catConversionService catConversionService}\n *\n * @constructor\n */\n    .value('catConversionFunctions', {\n        toClient: _convertToClientData,\n        toServer: function (clientData, context) {\n            return clientData;\n        }\n    })\n    .service('catConversionService', CatConversionService);","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.i18n:catI18nLocaleService\n * @module cat.service.i18n\n */\nfunction CatI18nLocaleService($q, $locale, CAT_I18N_DEFAULT_LOCALE) {\n    this.getLanguageOfLocale = function (locale) {\n        if (_.isUndefined(locale)) {\n            return undefined;\n        }\n\n        if (locale.indexOf('-') !== -1) {\n            return locale.split('-')[0];\n        }\n\n        return locale;\n    };\n\n    this.getCurrentLocale = function () {\n        return $locale.id;\n    };\n\n    this.getDefaultLocale = function () {\n        return CAT_I18N_DEFAULT_LOCALE;\n    };\n}\n\nangular.module('cat.service.i18n')\n/**\n * @ngdoc overview\n * @name cat.service.i18n:CAT_I18N_DEFAULT_LOCALE\n * @constant\n *\n * @description\n * The default locale used for message translation\n */\n    .constant('CAT_I18N_DEFAULT_LOCALE', 'de')\n    .service('catI18nLocaleService', ['$q', '$locale', 'CAT_I18N_DEFAULT_LOCALE', CatI18nLocaleService]);","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.i18n:catI18nMessageSourceService\n * @module cat.service.i18n\n * @service\n *\n * @description\n * A service to retrieve message templates for a given key and locale\n *\n * @param {object} $q DOCTODO\n * @param {object} catI18nLocaleService DOCTODO\n * @param {string} CAT_I18N_DEFAULT_LOCALE DOCTODO\n * @constructor\n */\nfunction CatI18nMessageSourceService($q, catI18nLocaleService, CAT_I18N_DEFAULT_LOCALE) {\n    function _getLocale(locale) {\n        return locale || catI18nLocaleService.getDefaultLocale();\n    }\n\n    function _getMessages(locale) {\n        var localeId = _getLocale(locale);\n\n        var messages = window.cat.i18n[localeId];\n        if (_.isUndefined(messages)) {\n            messages = _getMessages(catI18nLocaleService.getLanguageOfLocale(localeId));\n        }\n        if (localeId !== CAT_I18N_DEFAULT_LOCALE && _.isUndefined(messages)) {\n            messages = _getMessages(CAT_I18N_DEFAULT_LOCALE);\n        }\n\n        return messages;\n    }\n\n    /**\n     * @ngdoc function\n     * @name getMessages\n     * @methodOf cat.service.i18n:catI18nMessageSourceService\n     * @function\n     *\n     * @description\n     * Function which retrieves a message bundle for a given locale\n     *\n     * @param {String} [locale] the locale in which the messages should be retrieved\n     * @returns {Promise} a promise holding the retrieved message bundle\n     */\n    this.getMessages = function (locale) {\n        return $q.when(_getMessages(locale));\n    };\n\n    /**\n     * @ngdoc function\n     * @name getMessage\n     * @methodOf cat.service.i18n:catI18nMessageSourceService\n     * @function\n     *\n     * @description\n     * Function which retrieves a message for a given key and locale\n     *\n     * @param {String} key the key of the message to retrieve\n     * @param {String} [locale = CAT_I18N_DEFAULT_LOCALE] the locale in which the messages should be retrieved\n     * @returns {Promise} a promise holding the retrieved message\n     */\n    this.getMessage = function (key, locale) {\n        var bundle = _getMessages(locale);\n        if (_.isUndefined(bundle) || _.isUndefined(bundle[key])) {\n            return $q.reject('No message found for key \\'' + key + '\\' and the given locale \\'' + _getLocale(locale) + '\\'');\n        }\n        return $q.when(bundle[key]);\n    };\n\n\n    /**\n     * @ngdoc function\n     * @name hasMessage\n     * @methodOf cat.service.i18n:catI18nMessageSourceService\n     * @function\n     *\n     * @description\n     * Function which checks whether or not a message for a given key and locale exists\n     *\n     * @param {String} key the key of the message to retrieve\n     * @param {String} [locale = CAT_I18N_DEFAULT_LOCALE] the locale in which the messages should be available\n     * @returns {Promise} a promise holding <code>TRUE</code> if the key can be resolved for the given locale\n     */\n    this.hasMessage = function (key, locale) {\n        var bundle = _getMessages(locale);\n        return $q.when(!_.isUndefined(bundle) && !_.isUndefined(bundle[key]));\n    };\n}\n\nangular.module('cat.service.i18n')\n    .service('catI18nMessageSourceService', ['$q', 'catI18nLocaleService', 'CAT_I18N_DEFAULT_LOCALE', CatI18nMessageSourceService]);\n","/**\n * Created by tscheinecker on 21.10.2014.\n */\n'use strict';\n\nfunction CatI18nService($q, $log, catI18nMessageSourceService, catI18nMessageParameterResolver) {\n    var that = this;\n\n    /**\n     * @name catI18nService#translate\n     * @function\n     *\n     * @description\n     * Tries to resolve the given key to a message of the given locale. The messages are retrieved from the\n     * {@link catI18nMessageSourceService} and then passed through {@link catI18nMessageParameterResolver}.\n     *\n     * @param {String} key the key of the message to be translated\n     * @param {Object|Array} [parameters] message parameters usable in the resolved message\n     * @param {String} [locale = CAT_I18N_DEFAULT_LOCALE] the locale to use for translation\n     * @returns {Promise} Returns a promise of the translated key\n     */\n    this.translate = function (key, parameters, locale) {\n        var deferred = $q.defer();\n        var model = parameters;\n\n        if (_.isArray(parameters)) {\n            parameters.forEach(function (value, idx) {\n                model['p' + idx] = value;\n            });\n        }\n\n        that.canTranslate(key, locale).then(\n            function (canTranslate) {\n                if (canTranslate) {\n                    catI18nMessageSourceService.getMessage(key, locale).then(\n                        function (message) {\n                            try {\n                                deferred.resolve(catI18nMessageParameterResolver(message, model));\n                            } catch (e) {\n                                $log.warn(e);\n                                deferred.reject(e);\n                            }\n                        },\n                        function (reason) {\n                            $log.warn(reason);\n                            deferred.reject(reason);\n                        }\n                    );\n                } else {\n                    var reason = 'No translation for key \\'' + key + '\\' available!';\n                    $log.warn(reason);\n                    deferred.reject(reason);\n                }\n            },\n            deferred.reject\n        );\n        return deferred.promise;\n    };\n\n    /**\n     * @name catI18nService#canTranslate\n     * @function\n     *\n     * @description\n     * Wraps an object that might be a value or a (3rd party) then-able promise into a $q promise.\n     * This is useful when you are dealing with an object that might or might not be a promise, or if\n     * the promise comes from a source that can't be trusted.\n     *\n     * @param {String} key the key of the message to be translated\n     * @param {String} [locale] the locale to use for translation\n     * @returns {Promise} Returns a promise which resolves to true when a message for the given key exists for the\n     * specified locale\n     */\n    this.canTranslate = function (key, locale) {\n        var deferred = $q.defer();\n\n        catI18nMessageSourceService.getMessages(locale).then(\n            function (messages) {\n                deferred.resolve(!_.isUndefined(messages) && !_.isUndefined(messages[key]));\n            },\n            function (reason) {\n                $q.reject(reason);\n            }\n        );\n\n        return deferred.promise;\n    };\n}\n\nangular.module('cat.service.i18n')\n/**\n * @ngdoc service\n * @name cat.service.i18n:catI18nMessageParameterResolver\n * @value\n *\n * @description\n * A function which accepts a message and parameters and returns the resolved message\n */\n    .value('catI18nMessageParameterResolver', function (message, parameters) {\n        return _.template(message, parameters || {}, {interpolate: /{{([\\s\\S\\d]+?)}}/g});\n    })\n\n\n/**\n * @ngdoc service\n * @name cat.service.i18n:catI18nService\n * @service\n *\n * @description\n * A service to translate message keys to messages of specific locales\n *\n * @param {object} $q DOCTODO\n * @param {object} catI18nMessageSourceService DOCTODO\n * @param {object} catI18nMessageParameterResolver DOCTODO\n * @constructor\n */\n    .service('catI18nService', ['$q', '$log', 'catI18nMessageSourceService', 'catI18nMessageParameterResolver', CatI18nService]);\n","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.route:catRouteServiceProvider\n * @description\n * This service provider delegates to the $stateProvider and actually creates 2 separate routes after applying various\n * conventions / defaults\n */\nfunction CatRouteServiceProvider($stateProvider) {\n    var viewNames = [];\n\n    function _getListUrl(baseUrl, name, config) {\n        var listUrl = baseUrl + '/' + window.cat.util.pluralize(name.toLowerCase());\n\n        if (!!config && config.url) {\n            listUrl = baseUrl + '/' + config.url;\n        }\n\n        return listUrl;\n    }\n\n    function _registerAbstractState(url, name) {\n        $stateProvider\n            .state(name, {\n                abstract: true,\n                template: '<ui-view></ui-view>',\n                url: url\n            });\n    }\n\n    function _getStateName(name, config) {\n        if (!!config && !!config.parent) {\n            return config.parent + '.' + name;\n        }\n\n        return name;\n    }\n\n    function _registerDetailState(config, name) {\n        var stateName = _getStateName(name, config);\n        var detailConfig = _getDetailConfig(config, name);\n\n        $stateProvider\n            .state(stateName + '.detail', detailConfig);\n\n        if (!!config && config.additionalViewTemplate === 'tabs') {\n            $stateProvider\n                .state(stateName + '.tab', {\n                    abstract: true,\n                    template: '<ui-view></ui-view>',\n                    url: '/:' + name.toLowerCase() + 'Id'\n                });\n        }\n    }\n\n    function _registerListState(config, name) {\n        var stateName = _getStateName(name, config);\n        var listConfig = _getListConfig(config, name);\n        $stateProvider\n            .state(stateName + '.list', listConfig);\n    }\n\n    /**\n     * A helper function for detail routes which applies a few optimizations and some auto configuration.\n     * The actual instantiated controller will be 'CatBaseDetailController' with a default templateUrl\n     * 'template/cat-base-detail.tpl.html'. As the CatBaseDetailController expects a config object with several properties\n     * (templateUrls, parents, detail, endpoint, etc.) this function also takes care of providing the correct 'resolve'\n     * object which pre-loads all the necessary data.\n     * @param {Object} config the route config object which will be used to generate the actual route configuration\n     * @returns {{templateUrl: (string), controller: string, reloadOnSearch: (boolean), resolve: {config: (object)}}}\n     */\n    function _getDetailConfig(config, name) {\n        var _config = _.assign({name: name}, config);\n\n        return {\n            url: _config.url || '/:id',\n            templateUrl: _config.templateUrl || 'template/cat-base-detail.tpl.html',\n            controller: 'CatBaseDetailController',\n            reloadOnSearch: _config.reloadOnSearch,\n            resolve: {\n                config: function($stateParams, catViewConfigService) {\n                    // TODO $stateParams needs to be passed from here because otherwise it's empty...\n                    return catViewConfigService.getDetailConfig(_config, $stateParams);\n                }\n            }\n        };\n    }\n\n    /**\n     * A helper function for list routes which applies a few optimizations and some auto configuration.\n     * In the current state it handles 4 settings:\n     * * templateUrl - Auto-generation of the correct templateUrl based on conventions and the config.name property\n     * * controller - Auto-generation of the correct controller based on conventions and the config.name property\n     * * reloadOnSearch - this property is set to false\n     * * resolve - a object with a 'listData' property is returned which is resolved via the correct endpoint\n     *\n     * @param {Object} config the route config object which will be used to generate the actual route configuration\n     * @return {{reloadOnSearch: boolean, controller: string, templateUrl: (string), resolve: {config: Object}}}\n     */\n    function _getListConfig(config, name) {\n        var _config = _.assign({name: name}, config);\n\n        return {\n            url: _config.url || '',\n            reloadOnSearch: false,\n            controller: 'CatBaseListController',\n            controllerAs: 'catBaseListController',\n            templateUrl: _config.templateUrl || 'template/cat-base-list.tpl.html',\n            resolve: {\n                config: function(catViewConfigService) {\n                    return catViewConfigService.getListConfig(_config);\n                }\n            }\n        };\n    }\n\n    /**\n     * @ngdoc function\n     * @name detailRoute\n     * @methodOf cat.service.route:catRouteServiceProvider\n     *\n     * @description\n     * This function creates route url via convention from the given parameters and passes them (together with the\n     * configuration) to the $stateProvider. The actual route configuration is received by passing the given one\n     * to #window.cat.util.route.detail\n     *\n     * @param {string} baseUrl the base url which will be prepended to all routes\n     * @param {string} name the name for which the routes will be created\n     * @param {Object} [config] the config object which wraps the configurations for the list and detail route\n     */\n    this.detailRoute = function (baseUrl, name, config) {\n        var stateName = _getStateName(name, config);\n        viewNames.push(stateName);\n\n        var listUrl = _getListUrl(baseUrl, name, config);\n\n        _registerAbstractState(listUrl, stateName);\n        _registerDetailState(config, name);\n    };\n\n    /**\n     * @ngdoc function\n     * @name detailRoute\n     * @methodOf cat.service.route:catRouteServiceProvider\n     *\n     * @description\n     * This function creates route urls via convention from the given parameters and passes them (together with the\n     * configuration) to the $stateProvider. The actual route configuration is received by passing the given one\n     * to #window.cat.util.route.list and #window.cat.util.route.detail\n     *\n     * @param {string} baseUrl the base url which will be prepended to all routes\n     * @param {string} name the name for which the routes will be created\n     * @param {Object} [config] the config object which wraps the configurations for the list and detail route\n     */\n    this.listAndDetailRoute = function (baseUrl, name, config) {\n        var stateName = _getStateName(name, config);\n        viewNames.push(stateName);\n        if (_.isUndefined(config)) {\n            config = {};\n        }\n\n        var listUrl = _getListUrl(baseUrl, name, config);\n\n        _registerAbstractState(listUrl, stateName);\n        _registerDetailState(config.details, name);\n        _registerListState(config.list, name);\n    };\n\n    /**\n     * @ngdoc service\n     * @name cat.service.route:catRouteService\n     * @module cat.service.route\n     *\n     * @description\n     * This service simply exposes the created view and endpoint names, as the provider basically only delegates\n     * to the $stateProvider\n     */\n    this.$get = function () {\n        return viewNames;\n    };\n}\n\nangular.module('cat.service.route')\n    .provider('catRouteService', CatRouteServiceProvider)\n    .run(function($rootScope, $log, $globalMessages, catBreadcrumbsService) {\n        $rootScope.$on('$stateChangeError', function() {\n            var exception = arguments[arguments.length - 1];\n            $globalMessages.addMessage('warning', exception);\n            $log.warn(exception);\n        });\n        $rootScope.$on('$stateChangeSuccess', function() {\n            catBreadcrumbsService.clear();\n        });\n    });","'use strict';\n\n\nfunction assignDeep(target, source) {\n    return _.assign(target, source, function (targetProperty, sourceProperty) {\n        if (_.isObject(targetProperty) && _.isObject(sourceProperty)) {\n            return assignDeep(targetProperty, sourceProperty);\n        }\n\n        return sourceProperty;\n    });\n}\n\n/**\n * @ngdoc service\n * @name cat.service.selectConfig:catSelectConfigService\n * @module cat.service.selectConfig\n *\n * @constructor\n */\nfunction CatSelectConfigService(configs) {\n    var _configs = configs;\n\n    /**\n     * @ngdoc function\n     * @name getConfig\n     * @method of cat.service.selectConfig:catSelectConfigService\n     *\n     * @description\n     *\n     * @param {String} name the name of the config to retreive\n     * @param {Object} [options] Optional options to use as default values\n     * @returns {*} the named config object (with applied defaults) or undefined\n     */\n    this.getConfig = function (name, options) {\n        var config = configs[name];\n\n        if (_.isUndefined(config) && _.isUndefined(options)) {\n            return undefined;\n        }\n\n        return assignDeep(_.clone(config) || {}, options);\n    };\n}\n\n/**\n * @ngdoc service\n * @name cat.service.selectConfig:catSelectConfigServiceProvider\n * @module cat.service.selectConfig\n *\n * @description\n *\n * @constructor\n */\nfunction CatSelectConfigServiceProvider() {\n    var configs = {};\n\n    /**\n     * @ngdoc function\n     * @name getConfig\n     * @method of cat.service.selectConfig:catSelectConfigServiceProvider\n     *\n     * @description\n     *\n     * @param {String} name the name of the config to save or retrieve\n     * @param {Object} [config] The config to save for the given name or undefined to receive the config\n     * @returns {*} the named config object\n     */\n    this.config = function (name, config) {\n        if (!_.isUndefined(config)) {\n            configs[name] = config;\n        }\n\n        return configs[name];\n    };\n\n    this.$get = function () {\n        return new CatSelectConfigService(configs);\n    };\n}\n\nangular.module('cat.service.selectConfig').provider('catSelectConfigService', CatSelectConfigServiceProvider);","/**\n * @author Thomas Scheinecker, Catalysts GmbH.\n */\n\n'use strict';\n\nfunction CatViewConfigService($q, catApiService, catListDataLoadingService) {\n    function toLowerCaseName(name) {\n        if (!name) {\n            return '';\n        }\n        return name.toLowerCase();\n    }\n\n    function getDetailData($stateParams, Model, endpoint) {\n        var detailPromise;\n\n        var detailId = $stateParams.id;\n        if (detailId === 'new') {\n            detailPromise = $q.when(new Model());\n        } else {\n            detailPromise = endpoint.get(detailId);\n        }\n        return detailPromise;\n    }\n\n    function getEndpoint(endpointName, parentEndpointNames, $stateParams) {\n        var endpoint = catApiService[endpointName];\n\n        if (_.isArray(parentEndpointNames)) {\n            _.forEach(parentEndpointNames, function (parentEndpointName, idx) {\n                var currentEndpoint;\n                if (idx === 0) {\n                    // root api endpoint\n                    currentEndpoint = catApiService[parentEndpointName];\n                } else {\n                    // child api endpoint\n                    currentEndpoint = endpoint[parentEndpointName];\n                }\n                endpoint = currentEndpoint.res($stateParams[parentEndpointName + 'Id']);\n            });\n\n            endpoint = endpoint[endpointName];\n        }\n\n        return endpoint;\n    }\n\n    function getParentInfo(endpoint) {\n        if (!_.isUndefined(endpoint) && !_.isUndefined(endpoint.parentInfo)) {\n            var deferred = $q.defer();\n            var parents = [];\n            endpoint.parentInfo().then(\n                function (parent) {\n                    parents.push(parent);\n                    getParentInfo(endpoint.parentEndpoint).then(\n                        function (response) {\n                            parents.push(response);\n                            parents = _.flatten(parents);\n                            deferred.resolve(parents);\n                        },\n                        function (error) {\n                            deferred.reject(error);\n                        }\n                    );\n                }, function (error) {\n                    deferred.reject(error);\n                });\n            return deferred.promise;\n        } else {\n            return $q.when([]);\n        }\n    }\n\n    this.getDetailConfig = function (config, $stateParams) {\n        var endpointName, parentEndpointNames;\n\n        if (_.isString(config.endpoint)) {\n            endpointName = config.endpoint;\n        } else if (_.isObject(config.endpoint)) {\n            parentEndpointNames = config.endpoint.parents;\n            endpointName = config.endpoint.name;\n        } else {\n            endpointName = toLowerCaseName(config.name);\n        }\n\n        var Model = config.model || window.cat.util.defaultModelResolver(config.name);\n\n        var parentUrl = '';\n        var parentTemplateNamePrefix = '';\n\n\n        if (_.isArray(parentEndpointNames)) {\n            _.forEach(parentEndpointNames, function (parentEndpointName) {\n                parentUrl += parentEndpointName;\n                parentUrl += '/';\n\n                parentTemplateNamePrefix += parentEndpointName;\n                parentTemplateNamePrefix += '-';\n            });\n        }\n\n        var tabs;\n\n        var templateUrls = {\n            edit: parentUrl + endpointName + '/' + parentTemplateNamePrefix + endpointName + '-details-edit.tpl.html',\n            view: parentUrl + endpointName + '/' + parentTemplateNamePrefix + endpointName + '-details-view.tpl.html'\n        };\n\n        if (config.additionalViewTemplate === true) {\n            templateUrls.view = {\n                main: templateUrls.view,\n                additional: parentUrl + endpointName + '/' + parentTemplateNamePrefix + endpointName + '-additional-details-view.tpl.html'\n            };\n        } else if (config.additionalViewTemplate === 'tabs') {\n            templateUrls.view = {\n                main: templateUrls.view,\n                additional: 'template/cat-base-additional-details-tabs-view.tpl.html'\n            };\n            tabs = config.additionalViewTemplateTabs;\n        }\n\n        var deferred = $q.defer();\n        var endpoint = getEndpoint(endpointName, parentEndpointNames, $stateParams);\n\n        var resolvedConfig = {\n            name: config.name,\n            controller: config.controller || config.name + 'DetailsController',\n            endpoint: endpoint,\n            Model: Model,\n            templateUrls: templateUrls,\n            tabs: tabs\n        };\n\n\n        var detailPromise = getDetailData($stateParams, Model, endpoint);\n        detailPromise.then(function (data) {\n            resolvedConfig.detail = data;\n        });\n\n        var parentsPromise = getParentInfo(endpoint);\n        parentsPromise.then(function (parents) {\n            resolvedConfig.parents = parents;\n        });\n\n        $q.all([detailPromise, parentsPromise]).then(\n            function () {\n                deferred.resolve(resolvedConfig);\n            },\n            function (reason) {\n                deferred.reject(reason);\n            }\n        );\n\n        return deferred.promise;\n    };\n\n\n    function getListDataPromise(config, name) {\n        return catListDataLoadingService.resolve(config.endpoint || name, config.defaultSort);\n    }\n\n    this.getListConfig = function(config) {\n        var name = toLowerCaseName(config.name);\n\n        var deferredConfig = $q.defer();\n        var resolvedConfig = {\n            name: config.name,\n            controller: config.controller || config.name + 'Controller',\n            title: window.cat.util.pluralize(config.name),\n            searchProps: config.searchProps || window.cat.util.defaultListSearchProps,\n            listTemplateUrl: config.listTemplateUrl || (name + '/' + name + '-list.tpl.html')\n        };\n\n        getListDataPromise(config, name).then(\n            function (listData) {\n                resolvedConfig.listData = listData;\n                deferredConfig.resolve(resolvedConfig);\n            }\n        );\n\n        return deferredConfig.promise;\n    };\n}\n\nangular.module('cat.service.view.config')\n    .service('catViewConfigService', CatViewConfigService);\n","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.view:catViewService\n * @module cat.service.view\n *\n * @description\n * This service provider can be used to initialize an api endpoint and the according detail and list routes by simply\n * providing a name and a config object.\n *\n * @param {CatRouteServiceProvider} catRouteServiceProvider DOCTODO\n * @param {CatApiServiceProvider} catApiServiceProvider DOCTODO\n * @constructor\n */\nfunction CatViewServiceProvider(catRouteServiceProvider, catApiServiceProvider) {\n    var viewNames = [];\n    var endpointNames = [];\n\n    /**\n     * This function registers a new api endpoint with catApiServiceProvider and a list and detail route with\n     * catRouteServiceProvider\n     * @param {string} baseUrl the base url which will be prepended to all generated route pats\n     * @param {string} name the name used as entry point to all routes and endpoint creations (camel cased)\n     * @param {object} [config] the config object which can in turn hold objects used for configuration of the endpoint,\n     * detail route or list route\n     */\n    this.listAndDetailView = function (baseUrl, name, config) {\n        var endpointName = name.toLowerCase();\n        var url = window.cat.util.pluralize(endpointName);\n\n        if (!!config) {\n            url = config.url || url;\n        }\n\n        var endpoint = {\n            model: window.cat.util.defaultModelResolver(name),\n            url: url\n        };\n\n        if (!!config) {\n            endpoint = _.assign(endpoint, config.endpoint);\n        }\n\n\n        viewNames.push(name);\n        endpointNames.push(endpointName);\n\n        catApiServiceProvider.endpoint(name.toLowerCase(), endpoint);\n        catRouteServiceProvider.listAndDetailRoute(baseUrl, name, config);\n    };\n\n    /**\n     * This service simply exposes the created view and endpoint names, as the provider basically only delegates\n     * to other service providers\n     * @return {{views: Array, endpoints: Array}}\n     */\n    this.$get = function () {\n        return {\n            views: viewNames,\n            endpoints: endpointNames\n        };\n    };\n}\n\nangular.module('cat.service.view').provider('catViewService', CatViewServiceProvider);","'use strict';\n\nfunction MenuEntry(menuEntryId, options, parent) {\n    this.id = menuEntryId;\n    this.completeId = parent.completeId + '.' + this.id;\n    var _options = options;\n\n    this.getOptions = function () {\n        return _options;\n    };\n\n    this.isGroup = function () {\n        return false;\n    };\n\n    this.isMenu = function () {\n        return false;\n    };\n}\n\nfunction MenuGroup(groupId, options, parent) {\n    var that = this;\n    this.id = groupId;\n    this.completeId = parent.completeId + '.' + this.id;\n    var _menuEntries = [];\n    var _options = options;\n\n    this.addMenuEntry = function (menuEntryId, options) {\n        _menuEntries.push(new MenuEntry(menuEntryId, options, that));\n    };\n\n    this.getOptions = function () {\n        return _options;\n    };\n\n    this.getEntries = function () {\n        return _.sortBy(_menuEntries, function (entry) {\n            return entry.getOptions().sortOrder || 10000;\n        });\n    };\n\n    this.isGroup = function () {\n        return true;\n    };\n\n    this.isMenu = function () {\n        return false;\n    };\n}\n\nfunction Menu(menuId, options) {\n    var that = this;\n    this.id = menuId;\n    this.completeId = this.id;\n    var _menuEntries = [];\n    var _menuGroups = {};\n    var _options = options;\n\n    this.addMenuGroup = function (groupId, options) {\n        _menuGroups[groupId] = new MenuGroup(groupId, options, that);\n    };\n\n    this.addMenuEntry = function (groupId, menuEntryId, options) {\n        if (_.isUndefined(groupId)) {\n            _menuEntries.push(new MenuEntry(menuEntryId, options, that));\n        } else {\n            _menuGroups[groupId].addMenuEntry(menuEntryId, options);\n        }\n    };\n\n    this.getGroups = function () {\n        return _.sortBy(_.map(_menuGroups, function (menuGroup) {\n            return menuGroup;\n        }), function (menuGroup) {\n            return menuGroup.getOptions().sortOrder || 10000;\n        });\n    };\n\n    this.getEntries = function (groupId) {\n        if (_.isUndefined(groupId)) {\n            return _.sortBy(_menuEntries, function (entry) {\n                return entry.getOptions().sortOrder || 10000;\n            });\n        }\n        return _menuGroups[groupId].getEntries();\n    };\n\n    this.getFlattened = function () {\n        return _.flatten([_menuEntries, _.map(this.getGroups(), function (group) {\n            return[group, group.getEntries()];\n        })]);\n    };\n\n    this.isMenu = function () {\n        return true;\n    };\n\n    this.isGroup = function () {\n        return false;\n    };\n\n    this.getOptions = function () {\n        return _options;\n    };\n}\n\nfunction MenuBar(menuBarId, options) {\n    this.id = menuBarId;\n    var _menus = {};\n    var _options = options;\n\n    this.addMenu = function (menuId, options) {\n        _menus[menuId] = new Menu(menuId, options);\n    };\n\n    this.addMenuGroup = function (menuId, groupId, options) {\n        _menus[menuId].addMenuGroup(groupId, options);\n    };\n\n    this.addMenuEntry = function (menuId, groupId, menuEntryId, options) {\n        _menus[menuId].addMenuEntry(groupId, menuEntryId, options);\n    };\n\n    this.getMenus = function () {\n        return _.map(_menus, function (menu) {\n            return menu;\n        });\n    };\n\n    this.getOptions = function () {\n        return _options;\n    };\n}\n\n/**\n * @ngdoc service\n * @name cat.service.menu:$mainMenu\n * @constructor\n */\nfunction MainMenuProvider() {\n    var _mainMenu = new MenuBar('main.menu', {});\n\n    var _menus = [];\n    var _groups = [];\n    var _entries = [];\n\n    this.menu = function (moduleId, options) {\n        _menus.push({\n            menuId: moduleId,\n            options: options\n        });\n    };\n\n    this.menuGroup = function (moduleId, groupId, options) {\n        _groups.push({\n            menuId: moduleId,\n            groupId: groupId,\n            options: options\n        });\n    };\n\n    this.menuEntry = function (moduleId, groupId, entryId, options) {\n        if (_.isUndefined(options)) {\n            options = entryId;\n            entryId = groupId;\n            groupId = undefined;\n        }\n        _entries.push({\n            menuId: moduleId,\n            groupId: groupId,\n            entryId: entryId,\n            options: options\n        });\n    };\n\n    this.$get = function () {\n        _.forEach(_menus, function (menu) {\n            _mainMenu.addMenu(menu.menuId, menu.options);\n        });\n\n        _.forEach(_groups, function (group) {\n            _mainMenu.addMenuGroup(group.menuId, group.groupId, group.options);\n        });\n\n        _.forEach(_entries, function (entry) {\n            _mainMenu.addMenuEntry(entry.menuId, entry.groupId, entry.entryId, entry.options);\n        });\n\n        return _mainMenu;\n    };\n}\n\nangular.module('cat.service.menu').provider('$mainMenu', MainMenuProvider);\n","window.cat = {};\n\nangular.module('cat.filters.replaceText', []);\nangular.module('cat.filters', ['cat.filters.replaceText']);\n\nangular.module('cat.template', ['ui.bootstrap.tpls']);\n\nangular.module('cat.service.search', []);\nangular.module('cat.service.conversion', []);\nangular.module('cat.service.api', ['cat.service.conversion', 'cat.service.search']);\nangular.module('cat.service.breadcrumbs', []);\nangular.module('cat.service.i18n', []);\nangular.module('cat.service.listDataLoading', ['cat.service.api']);\nangular.module('cat.service.route', ['ui.router']);\nangular.module('cat.service.selectConfig', []);\nangular.module('cat.service.view.config', ['cat.service.api']);\nangular.module('cat.service.view', ['cat.service.api', 'cat.service.route', 'cat.service.view.config']);\nangular.module('cat.service.loading', ['angularSpinner']);\nangular.module('cat.service.message', []);\nangular.module('cat.service.validation', ['cat.service.message']);\nangular.module('cat.service.httpIntercept', ['cat.service.loading', 'cat.service.message', 'cat.service.validation']);\nangular.module('cat.service.menu', []);\nangular.module('cat.service', [\n    'cat.service.conversion',\n    'cat.service.api',\n    'cat.service.breadcrumbs',\n    'cat.service.i18n',\n    'cat.service.listDataLoading',\n    'cat.service.route',\n    'cat.service.selectConfig',\n    'cat.service.view',\n    'cat.service.loading',\n    'cat.service.httpIntercept',\n    'cat.service.menu',\n    'cat.service.message',\n    'cat.service.search'\n]);\n\nangular.module('cat.directives.autofocus', []);\nangular.module('cat.directives.checkbox', []);\nangular.module('cat.directives.confirmClick', []);\nangular.module('cat.directives.fieldErrors', ['cat.service.validation']);\nangular.module('cat.directives.inputs', []);\nangular.module('cat.directives.loadMore', []);\nangular.module('cat.directives.menu', ['cat.service.menu']);\nangular.module('cat.directives.select', ['ui.select2', 'cat.service.api', 'cat.service.selectConfig']);\n\nangular.module('cat.directives.i18n', ['cat.service.i18n']);\n\nangular.module('cat.directives.paginated', [\n    'ui.bootstrap.pagination',\n    'cat.service.listDataLoading',\n    'cat.service.i18n',\n    'cat.service.search'\n]);\nangular.module('cat.directives.facets', ['cat.directives.paginated']);\nangular.module('cat.directives.sortable', ['cat.directives.paginated']);\n\nangular.module('cat.directives.form', []);\nangular.module('cat.directives.numbersOnly', []);\n\nangular.module('cat.controller.base.list', ['cat.service.breadcrumbs']);\nangular.module('cat.controller.base.tabs', []);\nangular.module('cat.controller.base.detail', ['cat.service.breadcrumbs', 'cat.controller.base.tabs']);\nangular.module('cat.controller', ['cat.controller.base.detail', 'cat.controller.base.list']);\n\nangular.module('cat.directives', [\n    'cat.template',\n    'cat.directives.autofocus',\n    'cat.directives.checkbox',\n    'cat.directives.confirmClick',\n    'cat.directives.fieldErrors',\n    'cat.directives.inputs',\n    'cat.directives.loadMore',\n    'cat.directives.menu',\n    'cat.directives.select',\n    'cat.directives.i18n',\n    'cat.directives.paginated',\n    'cat.directives.facets',\n    'cat.directives.sortable',\n    'cat.directives.form',\n    'cat.directives.numbersOnly'\n]);\n\nangular.module('cat', [\n    'cat.service',\n    'cat.template',\n    'cat.directives',\n    'cat.filters',\n    'cat.controller',\n    'ui.bootstrap'\n]);\n","'use strict';\n\nwindow.cat = window.cat || {};\n\n/**\n /**\n * @ngdoc function\n * @name cat.FacetTerm\n * @module cat\n *\n * @description\n * A 'FacetTerm' model used in conjunction with the cat-paginated directive where it represents a value of a group or\n * property which can be used to filter the shown list.\n * It consist of an id, a name and a count\n *\n * @param {Object} [data={}] the data used instantiate the object with. Usually this is the object representation\n * returned from the server.\n * @constructor\n */\nwindow.cat.FacetTerm = function (data) {\n    if (data === undefined) data = {};\n\n    this.id = data.id;\n    this.name = data.name;\n    this.count = data.count;\n};\n\n/**\n * @ngdoc overview\n * @name Facet\n *\n * @description\n * A 'Facet' model which is used in conjunction with the cat-paginated directive where it represents a group or\n * which property which can be used to filter the shown list.\n * It has a name and an array of FacetTerms\n *\n * @param {Object} [data={}] the data used instantiate the object with. Usually this is the object representation\n * returned from the server.\n * @constructor\n */\nwindow.cat.Facet = function (data) {\n    if (data === undefined) data = {};\n\n    this.name = data.name;\n    this.terms = _.map(data.facets, function (facet) {\n        return new window.cat.FacetTerm(facet);\n    });\n};","'use strict';\n\nwindow.cat = window.cat || {};\n\n/**\n * @ngdoc function\n * @name cat.SearchRequest\n * @module cat\n *\n * @description\n * A 'SearchRequest' model used by the catApiService to provide the backend with certain filter, order, page and size\n * parameters.\n *\n *\n * @param {Object} [searchUrlParams] an object representing the search parameters of the current url, which are\n * used to initialize the properties of the SearchRequest\n * @constructor\n */\nwindow.cat.SearchRequest = function (searchUrlParams) {\n\n    var _pagination = {\n        page: 1,\n        size: 100\n    };\n    var _sort = {};\n    var _search = {};\n    var _dirty = false;\n\n    var lastEncoded;\n\n    if (!!searchUrlParams && !_.isEmpty(searchUrlParams)) {\n        _pagination.page = searchUrlParams.page || _pagination.page;\n        _pagination.size = searchUrlParams.size || _pagination.size;\n        _sort.property = searchUrlParams.sort || _sort.property;\n        _sort.isDesc = searchUrlParams.rev || _sort.isDesc;\n        _.forEach(_.keys(searchUrlParams), function (param) {\n            if (param.indexOf('search.') > -1 && param.length > 7) {\n                _search[param.substring(7)] = searchUrlParams[param];\n            }\n        });\n    }\n\n    var _encodeSort = function () {\n        return (!!_sort.property ? 'sort=' + _sort.property + ':' + ((_sort.isDesc === true || _sort.isDesc === 'true') ? 'desc' : 'asc') : '');\n    };\n\n    var _encodePagination = function () {\n        return 'page=' + (!!_pagination.page ? Math.max(0, _pagination.page - 1) : 0) + '&size=' + _pagination.size || 100;\n    };\n\n    var _concatenate = function (result, next) {\n        if (!result) {\n            return next;\n        }\n\n        if (!next) {\n            return result;\n        }\n        return result + '&' + next;\n    };\n\n    var _encodeSearch = function () {\n        if (!!_search && !_.isEmpty(_search)) {\n            return $.param(_search, true);\n        }\n\n        return '';\n    };\n\n    var urlEndoded = function () {\n        return _([_encodePagination(), _encodeSort(), _encodeSearch()]).reduce(_concatenate);\n    };\n\n    /**\n     * @param {Object} [pagination] if given this object overrides the current 'pagination' state\n     * @returns {{}} the object representing the current pagination state\n     */\n    this.pagination = function (pagination) {\n        if (pagination === undefined) {\n            return _pagination;\n        } else {\n            _pagination = pagination;\n            _dirty = true;\n            return _pagination;\n        }\n    };\n\n\n    /**\n     * @param {Object} [sort] if given this object overrides the current 'sort' state\n     * @returns {{}} the object representing the current sort state\n     */\n    this.sort = function (sort) {\n        if (sort === undefined) {\n            return _sort;\n        } else {\n            _sort = sort;\n            _dirty = true;\n            return _sort;\n        }\n    };\n\n    /**\n     * @param {Object} [search] if given this object overrides the current 'search' state\n     * @returns {{}} the object representing the current search state\n     */\n    this.search = function (search) {\n        if (search === undefined) {\n            return _search;\n        } else {\n            _search = search;\n            _dirty = true;\n            return _search;\n        }\n    };\n\n    /**\n     * @deprecated use catSearchService#encodeAsUrl instead\n     *\n     * @returns {String} a string representation of the current SearchRequest which can be used as part of the request\n     * url\n     */\n    this.urlEncoded = function () {\n        lastEncoded = urlEndoded();\n        return lastEncoded;\n    };\n\n    this.setPristine = function () {\n        _dirty = false;\n    };\n\n    /**\n     * @returns {boolean} <code>true</code> if something changed since the last time {@link this#urlEncoded} was called\n     */\n    this.isDirty = function () {\n        return _dirty;\n    };\n\n    /**\n     * @deprecated use catSearchService#updateLocation instead\n     *\n     * A small helper function to update the current url to correctly reflect all properties set within this\n     * SearchRequest\n     * @param $location the angular $location service\n     */\n    this.setSearch = function ($location) {\n        var ret = {};\n        ret.page = _pagination.page;\n        ret.size = _pagination.size;\n        if (!!_sort.property) {\n            ret.sort = _sort.property;\n            ret.rev = _sort.isDesc || false;\n        }\n        _.forEach(_.keys(_search), function (s) {\n            ret['search.' + s] = _search[s];\n        });\n        $location.search(ret);\n    };\n};","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.autofocus:catAutofocus\n */\nangular.module('cat.directives.autofocus')\n    .directive('catAutofocus', function CatAutofocusDirective($timeout) {\n        return {\n            restrict: 'A',\n            link: function CatAutofocusLink(scope, element) {\n                $timeout(function () {\n                    if (!_.isUndefined(element.data('select2'))) {\n                        element.select2('open');\n                    } else {\n                        element[0].focus();\n                    }\n                }, 100);\n            }\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.checkbox:catCheckbox\n */\nangular.module('cat.directives.checkbox')\n    .directive('catCheckbox', function CatCheckboxDirective() {\n        return {\n            replace: true,\n            restrict: 'E',\n            scope: {\n                checked: '='\n            },\n            link: function CatCheckboxLink(scope, element) {\n                if (!!scope.checked) {\n                    element.addClass('glyphicon glyphicon-check');\n                } else {\n                    element.addClass('glyphicon glyphicon-unchecked');\n                }\n            }\n        };\n    });","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.confirmClick:catConfirmClick\n */\nangular.module('cat.directives.confirmClick')\n    .directive('catConfirmClick', function CatConfirmClickDirective() {\n        return {\n            restrict: 'A',\n            link: function CatConfirmClickLink(scope, element, attr) {\n                var msg = attr.catConfirmClick || 'Are you sure?';\n                var clickAction = attr.catOnConfirm;\n                element.bind('click', function (event) {\n                    if (window.confirm(msg)) {\n                        scope.$eval(clickAction);\n                    }\n                });\n            }\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.facets:catFacets\n */\nangular.module('cat.directives.facets')\n    .directive('catFacets', function CatFacetsDirective() {\n        function _initDefaults(scope) {\n            if (_.isUndefined(scope.listData)) {\n                scope.listData = scope.$parent.listData;\n            }\n        }\n\n        function _checkConditions(scope) {\n            if (_.isUndefined(scope.listData)) {\n                throw new Error('listData was not defined and couldn\\'t be found with default value');\n            }\n\n            if (_.isUndefined(scope.listData.facets)) {\n                throw new Error('No facets are available within given listData');\n            }\n        }\n\n        return {\n            replace: true,\n            restrict: 'E',\n            scope: {\n                listData: '=?',\n                names: '='\n            },\n            require: '^catPaginated',\n            templateUrl: 'template/cat-facets.tpl.html',\n            link: function CatFacetsLink(scope, element, attrs, catPaginatedController) {\n                _initDefaults(scope);\n                _checkConditions(scope);\n\n                scope.catPaginatedController = catPaginatedController;\n            },\n            controller: function CatFacetsController($scope) {\n                $scope.isActive = function (facet) {\n                    return !!$scope.catPaginatedController.getSearch()[facet.name];\n                };\n\n                function _search(search) {\n                    return $scope.catPaginatedController.getSearchRequest().search(search);\n                }\n\n                $scope.facetName = function (facet) {\n                    if ($scope.names !== undefined && $scope.names[facet.name] !== undefined) {\n                        return $scope.names[facet.name];\n                    } else {\n                        return facet.name;\n                    }\n                };\n\n                $scope.facets = {};\n\n                $scope.facetChanged = function (facet) {\n                    var search = _search();\n                    var value = $scope.facets[facet.name];\n                    if (!!value) {\n                        search[facet.name] = value;\n                    } else {\n                        delete search[facet.name];\n                    }\n                };\n\n                $scope.initFacets = function () {\n                    _.forEach($scope.listData.facets, function (facet) {\n                        if ($scope.isActive(facet)) {\n                            $scope.facets[facet.name] = $scope.catPaginatedController.getSearch()[facet.name];\n                        }\n                    });\n                };\n\n                $scope.facetSelectOptions = {\n                    allowClear: true\n                };\n            }\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.fieldError:catFieldErrors\n */\nangular.module('cat.directives.fieldErrors')\n    .directive('catFieldErrors', function CatFieldErrorsDirective() {\n        return {\n            replace: 'true',\n            restrict: 'E',\n            scope: {\n                name: '@'\n            },\n            bindToController: true,\n            controllerAs: 'catFieldErrors',\n            controller: function CatFieldErrorsController($scope, catValidationService) {\n                this.hasErrors = function() {\n                    return catValidationService.hasFieldErrors($scope.name);\n                };\n\n                this.getErrors = function() {\n                    return catValidationService.getFieldErrors($scope.name);\n                };\n            },\n            template: '<div class=\"label label-danger\" ng-if=\"catFieldErrors.hasErrors()\"><ul><li ng-repeat=\"error in catFieldErrors.getErrors()\">{{error}}</li></ul></div>'\n        };\n    });","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.i18n:catI18n\n */\nangular.module('cat.directives.i18n')\n    .directive('catI18n', ['$log', '$rootScope', 'catI18nService', function CatI18nDirective($log, $rootScope, catI18nService) {\n        function _translate(scope, element) {\n            if (!scope.key) {\n                $log.warn('No key was given for cat-i18n!');\n                return;\n            }\n            catI18nService.translate(scope.key, scope.params).then(\n                function (message) {\n                    element.text(message);\n                }, function (reason) {\n                    // TODO - introduce a handler service for this case - eg show '##missingkey: somekey##'\n                }\n            );\n        }\n\n\n        return {\n            restrict: 'A',\n            scope: {\n                key: '@catI18n',\n                params: '=?i18nParams',\n                watchParams: '=?i18nWatchParams'\n            },\n            link: function CatI18nLink(scope, element) {\n                _translate(scope, element);\n\n                if (!!scope.params && scope.watchParams === true) {\n                    scope.$watch('params', function () {\n                        _translate(scope, element);\n                    }, true);\n                }\n\n                $rootScope.$on('cat-i18n-refresh', function () {\n                    _translate(scope, element);\n                });\n            }\n        };\n    }]);\n","'use strict';\n\nangular.module('cat.directives.inputs')\n\n/**\n * @ngdoc directive\n * @name cat.directives.inputs:input\n */\n    .directive('input', function CatInputDirective() {\n        return {\n            require: 'ngModel',\n            restrict: 'E',\n            link: function CatInputLink(scope, element, attrs, ctrl) {\n                scope.$on('fieldErrors', function (event, fieldErrors) {\n                    if (!fieldErrors || !attrs.id) {\n                        return;\n                    }\n                    var valid = !fieldErrors[attrs.id];\n                    ctrl.$setValidity(attrs.id, valid);\n                });\n            }\n        };\n    })\n\n/**\n * @ngdoc directive\n * @name cat.directives.inputs:catInputGroup\n */\n    .directive('catInputGroup', function CatInputGroupDirective() {\n        return {\n            restrict: 'A',\n            transclude: true,\n            scope: {\n                label: '@',\n                name: '@'\n            },\n            link: function CatInputGroupLink(scope, element) {\n                element.addClass('form-group');\n            },\n            templateUrl: 'template/cat-input.tpl.html'\n        };\n    });","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.loadMore:catLoadMore\n */\nangular.module('cat.directives.loadMore')\n    .directive('catLoadMore', function CatLoadMoreDirective() {\n        return {\n            replace: true,\n            restrict: 'A',\n            link: function CatLoadMoreLink(scope, element, attrs) {\n                var initialCount = parseInt(attrs.catLoadMore);\n                scope.$parent.elementsCount = scope.$parent.elementsCount || initialCount;\n                scope.$parent.elements = scope.$parent.elements || [];\n                scope.$parent.elements.push(element);\n                if (scope.$parent.elements.length > scope.$parent.elementsCount) {\n                    element.addClass('hidden');\n                }\n                if (!element.parent().next().length && scope.$parent.elements.length > scope.$parent.elementsCount) {\n                    var elt = $('<a href=\"#\">Show more</a>');\n                    elt.on({\n                        click: function () {\n                            scope.$parent.elementsCount += initialCount;\n                            if (scope.$parent.elements.length <= scope.$parent.elementsCount) {\n                                elt.addClass('hidden');\n                            }\n                            scope.$parent.elements.forEach(function (elt, ind) {\n                                if (ind < scope.$parent.elementsCount) {\n                                    elt.removeClass('hidden');\n                                }\n                            });\n                            return false;\n                        }\n                    });\n                    element.parent().after(elt);\n                }\n            }\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.menu:catLoadMore\n */\nangular.module('cat.directives.menu')\n    .directive('catMainMenu', ['$mainMenu', '$rootScope', function CatMainMenuDirective($mainMenu, $rootScope) {\n        return {\n            restrict: 'E',\n            scope: {},\n            link: function CatMainMenuLink(scope) {\n                scope.menus = $mainMenu.getMenus();\n                scope.isVisible = function (entry) {\n                    var visible = false;\n                    if (entry.isMenu() || entry.isGroup()) {\n                        _.forEach(entry.getEntries(), function (subEntry) {\n                            visible = visible || scope.isVisible(subEntry);\n                        });\n                        if (entry.isMenu()) {\n                            _.forEach(entry.getGroups(), function (groups) {\n                                visible = visible || scope.isVisible(groups);\n                            });\n                        }\n                    } else {\n                        return scope.isAllowed(entry);\n                    }\n                    return visible;\n                };\n                scope.isAllowed = function (entry) {\n                    var rights = entry.getOptions().rights;\n                    if (!!rights) {\n                        if (_.isArray(rights)) {\n                            var allowed = true;\n                            for (var i = 0; i < rights.length; i++) {\n                                allowed = allowed && $rootScope.isAllowed(rights[i]);\n                            }\n                            return allowed;\n                        }\n                        return $rootScope.isAllowed(rights);\n                    }\n                    return true;\n                };\n            },\n            templateUrl: 'template/cat-main-menu.tpl.html'\n        };\n    }]);\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.paginated:catPaginated\n */\nangular.module('cat.directives.paginated')\n    .directive('catPaginated', function CatPaginatedDirective($log, catI18nService) {\n        var SEARCH_PROP_KEY = 'cc.catalysts.cat-paginated.search.prop';\n\n        return {\n            replace: true,\n            restrict: 'E',\n            transclude: true,\n            scope: {\n                listData: '=?',\n                syncLocation: '=?'\n            },\n            templateUrl: 'template/cat-paginated.tpl.html',\n            link: function CatPaginatedLink(scope, element, attrs) {\n                if (!!attrs.searchProps) {\n                    scope.searchProps = _.filter(attrs.searchProps.split(','), function (prop) {\n                        return !!prop;\n                    });\n\n                    scope.searchPropertyPlaceholders = {};\n\n                    _.forEach(scope.searchProps, function (searchProp) {\n                        scope.searchPropertyPlaceholders[searchProp] = 'Search by ' + searchProp;\n                        catI18nService.translate(SEARCH_PROP_KEY, {prop: searchProp})\n                            .then(function (message) {\n                                scope.searchPropertyPlaceholders[searchProp] = message;\n                            });\n                    });\n                }\n            },\n            controllerAs: 'catPaginatedController',\n            controller: function CatPaginatedController($scope, $location, $timeout, $rootScope, catListDataLoadingService, catI18nService, catSearchService) {\n                var that = this;\n                var searchTimeout = null, DELAY_ON_SEARCH = 500;\n                var PAGINATION_PREVIOUS_KEY = 'cc.catalysts.cat-paginated.pagination.previous';\n                var PAGINATION_NEXT_KEY = 'cc.catalysts.cat-paginated.pagination.next';\n                var PAGINATION_FIRST_KEY = 'cc.catalysts.cat-paginated.pagination.first';\n                var PAGINATION_LAST_KEY = 'cc.catalysts.cat-paginated.pagination.last';\n\n                if (_.isUndefined($scope.listData)) {\n                    $scope.listData = $scope.$parent.listData;\n                    if (_.isUndefined($scope.listData)) {\n                        throw new Error('listData was not defined and couldn\\'t be found with default value');\n                    }\n                }\n\n                if (_.isUndefined($scope.syncLocation)) {\n                    $scope.syncLocation = _.isUndefined($scope.$parent.detail);\n                }\n\n                $scope.paginationText = {\n                    previous: 'Previous',\n                    next: 'Next',\n                    first: 'First',\n                    last: 'Last'\n                };\n\n                function handlePaginationTextResponse(prop) {\n                    return function (message) {\n                        $scope.paginationText[prop] = message;\n                    };\n                }\n\n\n                function _loadPaginationTranslations() {\n                    catI18nService.translate(PAGINATION_PREVIOUS_KEY).then(handlePaginationTextResponse('previous'));\n                    catI18nService.translate(PAGINATION_NEXT_KEY).then(handlePaginationTextResponse('next'));\n                    catI18nService.translate(PAGINATION_FIRST_KEY).then(handlePaginationTextResponse('first'));\n                    catI18nService.translate(PAGINATION_LAST_KEY).then(handlePaginationTextResponse('last'));\n                }\n\n                _loadPaginationTranslations();\n\n                $rootScope.$on('cat-i18n-refresh', function () {\n                    _loadPaginationTranslations();\n                });\n\n                $scope.listData.search = $scope.listData.search || $scope.listData.searchRequest.search() || {};\n\n                var searchRequest = $scope.listData.searchRequest;\n\n                var reload = function (delay, force) {\n                    $timeout.cancel(searchTimeout);\n                    searchTimeout = $timeout(function () {\n                        if (searchRequest.isDirty() || !!force) {\n                            catListDataLoadingService.load($scope.listData.endpoint, searchRequest).then(\n                                function (data) {\n                                    searchRequest.setPristine();\n                                    _.assign($scope.listData, data);\n                                }\n                            );\n                        }\n                    }, delay || 0);\n                };\n\n                $rootScope.$on('cat-paginated-refresh', function () {\n                    reload(0, true);\n                });\n\n                $scope.$watch('listData.sort', function (newVal) {\n                    if (!!newVal) {\n                        console.log('broadcasting sort changed: ' + angular.toJson(newVal));\n                        $scope.$parent.$broadcast('SortChanged', newVal);\n                    }\n                }, true);\n\n                function updateLocation() {\n                    if ($scope.syncLocation !== false) {\n                        catSearchService.updateLocation(searchRequest);\n                        $location.replace();\n                    }\n                }\n\n                $scope.$watch('listData.pagination', function () {\n                    searchRequest.pagination($scope.listData.pagination);\n                    updateLocation();\n                    reload();\n                }, true);\n\n                var searchChanged = function (value, delay) {\n                    searchRequest.search(value);\n                    updateLocation();\n                    $scope.listData.pagination.page = 1;\n                    reload(delay);\n                };\n\n                var updateSearch = function (value) {\n                    var search = searchRequest.search();\n                    _.assign(search, value);\n                    searchChanged(value, DELAY_ON_SEARCH);\n                };\n\n                $scope.$watch('listData.search', updateSearch, true);\n\n                this.sort = function (value) {\n                    searchRequest.sort(value);\n                    updateLocation();\n                    $scope.listData.pagination.page = 1;\n                    reload();\n                };\n\n                this.getSearch = function () {\n                    return searchRequest.search();\n                };\n\n                this.getSearchRequest = function () {\n                    return searchRequest;\n                };\n\n                $scope.$on('SortChanged', function (event, value) {\n                    that.sort(value);\n                });\n            }\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.sortable:catSortable\n */\nangular.module('cat.directives.sortable')\n    .directive('catSortable', function CatSortableDirective($compile) {\n        return {\n            restrict: 'AC',\n            require: '^catPaginated',\n            link: function CatSortableLink(scope, element, attrs, catPaginatedController) {\n                var title = element.text();\n                var property = attrs.catSortable || title.toLowerCase().trim();\n\n                // todo - make configurable\n                scope.sort = scope.listData.searchRequest.sort();\n                scope.catPaginatedController = catPaginatedController;\n                var icon = 'glyphicon-sort-by-attributes';\n\n                if (!!attrs.sortMode) {\n                    if (attrs.sortMode === 'numeric') {\n                        icon = 'glyphicon-sort-by-order';\n                    } else if (attrs.sortMode === 'alphabet') {\n                        icon = 'glyphicon-sort-by-alphabet';\n                    }\n                }\n\n                element.text('');\n                element.append($compile('<a class=\"sort-link\" href=\"\" ng-click=\"toggleSort(\\'' + property + '\\')\" cat-i18n=\"cc.catalysts.cat-sortable.sort.' + property + '\">' + title + ' <span class=\"glyphicon\" ng-class=\"{\\'' + icon + '\\': sort.property == \\'' + property + '\\' && !sort.isDesc, \\'' + icon + '-alt\\': sort.property == \\'' + property + '\\' && sort.isDesc}\"></span></a>')(scope));\n            },\n            controller: function CatSortableController($scope) {\n                $scope.toggleSort = function (property) {\n                    if ($scope.sort.property === property) {\n                        $scope.sort.isDesc = !$scope.sort.isDesc;\n                    } else {\n                        $scope.sort.property = property;\n                        $scope.sort.isDesc = false;\n                    }\n\n                    $scope.catPaginatedController.sort($scope.sort);\n                };\n\n                $scope.$on('SortChanged', function (event, value) {\n                    $scope.sort = value;\n                });\n            }\n        };\n    });","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.form:form\n */\nangular.module('cat.directives.form')\n    .directive('form', ['$timeout', function CatFormDirective($timeout) {\n        return {\n            restrict: 'E',\n            scope: true,\n            require: 'form',\n            link: function CatFormLink(scope, element, attrs, formCtrl) {\n                var warningMessage = attrs.eocsWarnOnNavIfDirty || 'You have unsaved changes. Leave the page?';\n\n                // TODO - remove this ugly hack if ui-select2 fixes this problem...\n                $timeout(function () {\n                    formCtrl.$setPristine(true);\n                }, 50);\n\n                scope.$on('formReset', function () {\n                    formCtrl.$setPristine(true);\n                });\n\n                scope.$on('formDirty', function () {\n                    formCtrl.$setDirty(true);\n                });\n\n                // handle angular route change\n                scope.$on('$locationChangeStart', function (event) {\n                    if (formCtrl.$dirty) {\n                        if (!window.confirm(warningMessage)) {\n                            event.preventDefault();\n                        }\n                    }\n                });\n\n                // handle browser window/tab close\n                $(window).on('beforeunload', function (event) {\n                    if (formCtrl.$dirty) {\n                        return warningMessage;\n                    }\n                });\n\n                // clean up beforeunload handler when scope is destroyed\n                scope.$on('$destroy', function () {\n                    $(window).unbind('beforeunload');\n                });\n            }\n        };\n    }]);\n","'use strict';\n\n/**\n * @ngdoc directive\n * @name cat.directives.numbersOnly:numbersOnly\n */\nangular.module('cat.directives.numbersOnly')\n    .directive('numbersOnly', function CatNumbersOnlyDirective() {\n        return {\n            require: 'ngModel',\n            link: function CatNumbersOnlyLink(scope, element, attrs, modelCtrl) {\n                modelCtrl.$parsers.push(function (inputValue) {\n                    if (!inputValue) return '';\n\n                    var pattern = '[^0-9]';\n\n                    if (!!attrs.hasOwnProperty('allowFraction')) {\n                        pattern = '[^0-9,.]';\n                    }\n\n                    var transformedInput = inputValue.replace(new RegExp(pattern, 'g'), '');\n\n                    if (transformedInput !== inputValue) {\n                        modelCtrl.$setViewValue(transformedInput);\n                        modelCtrl.$render();\n                    }\n\n                    return transformedInput;\n                });\n            }\n        };\n    });","'use strict';\n\n\nangular.module('cat.filters.replaceText')\n\n/**\n * @ngdoc filter\n * @name cat.filters.replaceText:replaceText\n *\n * @description\n * Replaces text passages with other text, based on regular expressions\n *\n * @param {string} text original text\n * @param {string} pattern regular expression\n * @param {object} options regular expression options\n * @param {string} replacement replacement text\n */\n.filter('replaceText', function CatReplaceTetFilter() {\n    return function (text, pattern, options, replacement) {\n        if (pattern === undefined)\n            pattern = '\\n';\n        if (options === undefined)\n            options = 'g';\n        if (replacement === undefined)\n            replacement = ', ';\n        if (!text) {\n            return text;\n        } else {\n            return String(text).replace(new RegExp(pattern, options), replacement);\n        }\n    };\n});\n","/**\n * Created by tscheinecker on 23.10.2014.\n */\n'use strict';\n\nwindow.cat.i18n = window.cat.i18n || {};\nwindow.cat.i18n.de = window.cat.i18n.de || {};\n\n_.assign(window.cat.i18n.de, {\n    'cc.catalysts.cat-paginated.itemsFound': '{{count}} Einträge gefunden. Einträge {{firstResult}}-{{lastResult}}',\n    'cc.catalysts.cat-paginated.noItemsFound': 'Keine Einträge gefunden',\n    'cc.catalysts.general.new': 'Neu'\n});\n","/**\n * Created by tscheinecker on 23.10.2014.\n */\n'use strict';\n\nwindow.cat.i18n = window.cat.i18n || {};\nwindow.cat.i18n.en = window.cat.i18n.en || {};\n\n_.assign(window.cat.i18n.en, {\n    'cc.catalysts.cat-paginated.itemsFound': '{{count}} entries found. Entries {{firstResult}}-{{lastResult}}',\n    'cc.catalysts.cat-paginated.noItemsFound': 'No entries found',\n    'cc.catalysts.general.new': 'New'\n});\n","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.listDataLoading:catListDataLoadingService\n */\nangular.module('cat.service.listDataLoading')\n    .factory('catListDataLoadingService', ['$state', '$location', '$q', 'catApiService', 'catSearchService', function CatListDataLoadingService($state, $location, $q, catApiService, catSearchService) {\n        var load = function (endpoint, searchRequest) {\n            var deferred = $q.defer();\n            endpoint.list(searchRequest).then(\n                function success(data) {\n                    var pagination = searchRequest.pagination();\n\n                    var result = {\n                        count: data.totalCount,\n                        collection: data.elements,\n                        pagination: pagination,\n                        firstResult: (pagination.page - 1) * pagination.size + 1,\n                        lastResult: Math.min(pagination.page * pagination.size, data.totalCount),\n                        facets: data.facets,\n                        isSinglePageList: data.totalCount <= pagination.size,\n                        endpoint: endpoint,\n                        searchRequest: searchRequest\n                    };\n\n                    delete data.totalCount;\n                    delete data.elements;\n                    delete data.facets;\n\n                    deferred.resolve(_.assign(result, data));\n                },\n                function error(reason) {\n                    deferred.reject(reason);\n                });\n            return deferred.promise;\n        };\n        /**\n         *\n         * @param {String} endpointName\n         * @param {Object} [defaultSort={property:'name',isDesc:false}]\n         */\n        var resolve = function (endpointName, defaultSort) {\n            var searchRequest = catSearchService.fromLocation();\n            if (!defaultSort) {\n                defaultSort = {property: 'name', isDesc: false};\n            }\n            if (!!defaultSort && !$location.search().sort) {\n                searchRequest.sort(defaultSort);\n            }\n            return load(catApiService[endpointName], searchRequest);\n        };\n\n        return {\n            'load': load,\n            'resolve': resolve\n        };\n    }]);\n","/**\n * Created by Thomas on 08/03/2015.\n */\n\n'use strict';\n\n/**\n * @ngdoc overview\n * @name cat.service.search\n */\nangular.module('cat.service.search')\n/**\n * @ngdoc service\n * @name cat.service.search:catUrlEncodingService\n * @module cat.service.search\n *\n * @description\n * A small helper service which encapsulates the url encoding of an object.\n * In it's default version it just delegates to jQuery.param\n */\n    .service('catUrlEncodingService', function () {\n        this.encodeAsUrl = function (params) {\n            if (!!params && !_.isEmpty(params)) {\n                return $.param(params);\n            }\n\n            return '';\n        };\n    })\n/**\n * @ngdoc service\n * @name cat.service.search:catSearchService\n * @requires cat.service.search:catUrlEncodingService\n * @module cat.service.search\n *\n * @descripton\n * A helper service which encapsulates several operations which can be performed on a cat.SearchRequest\n */\n    .service('catSearchService', function ($location, catUrlEncodingService) {\n\n        var _encodeSort = function (_sort) {\n            return (!!_sort.property ? 'sort=' + _sort.property + ':' + ((_sort.isDesc === true || _sort.isDesc === 'true') ? 'desc' : 'asc') : '');\n        };\n\n        var _encodePagination = function (_pagination) {\n            return 'page=' + (!!_pagination.page ? Math.max(0, _pagination.page - 1) : 0) + '&size=' + _pagination.size || 100;\n        };\n        var _encodeSearch = function (_search) {\n            return catUrlEncodingService.encodeAsUrl(_search);\n        };\n\n        var urlEndoded = function (searchRequest) {\n            return _([\n                _encodePagination(searchRequest.pagination()),\n                _encodeSort(searchRequest.sort()),\n                _encodeSearch(searchRequest.search())\n            ]).reduce(_concatenate);\n        };\n\n        var _concatenate = function (result, next) {\n            if (!result) {\n                return next;\n            }\n\n            if (!next) {\n                return result;\n            }\n            return result + '&' + next;\n        };\n\n\n        /**\n         * @ngdoc function\n         * @name encodeAsUrl\n         * @methodOf cat.service.search:catSearchService\n         *\n         * @param {cat.SearchRequest} searchRequest the search request to encode as url\n         *\n         * @description\n         * This methods returns an url encoded version of the given search request\n         */\n        this.encodeAsUrl = function (searchRequest) {\n            if (!searchRequest) {\n                return '';\n            }\n\n            return urlEndoded(searchRequest);\n        };\n\n        /**\n         * @ngdoc function\n         * @name updateLocation\n         * @methodOf cat.service.search:catSearchService\n         *\n         * @param {cat.SearchRequest} searchRequest the search request from which to update the $location service\n         *\n         * @description\n         * This methods updates the browsers address bar via the $location service to reflect the given SearchRequest\n         */\n        this.updateLocation = function (searchRequest) {\n            if (!searchRequest) {\n                return;\n            }\n\n            var pagination = searchRequest.pagination();\n            var sort = searchRequest.sort();\n            var search = searchRequest.search();\n            var ret = {};\n            ret.page = pagination.page;\n            ret.size = pagination.size;\n            if (!!sort.property) {\n                ret.sort = sort.property;\n                ret.rev = sort.isDesc || false;\n            }\n            _.forEach(_.keys(search), function (s) {\n                ret['search.' + s] = search[s];\n            });\n            $location.search(ret);\n        };\n\n        /**\n         * @ngdoc function\n         * @name fromLocation\n         * @methodOf cat.service.search:catSearchService\n         *\n         * @description\n         * This methods returns a new instance of {@link cat.SearchRequest} with all parameters set according to the current url search parameters\n         */\n        this.fromLocation = function () {\n            return new cat.SearchRequest($location.search());\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc overview\n * @name cat.service.validation\n *\n * @descripton\n * module wrapping the validation logic\n */\nangular.module('cat.service.validation')\n/**\n * @ngdoc object\n * @name cat.service.validation:catValidations\n *\n * @description\n * value holding 'global' and 'field' errors\n */\n    .value('catValidations', {fieldErrors: {}})\n\n/**\n * @ngdoc service\n * @name cat.service.validation:catValidationService\n *\n * @description\n * Service which maps the 'fieldErrors' list recieved from the backend to a usable map for the client\n */\n    .service('catValidationService', function CatErrorHttpInterceptor($rootScope, $globalMessages, catValidations) {\n        this.updateFromRejection = function (rejection) {\n            delete catValidations.global;\n\n            if (!!rejection.data.globalErrors) {\n                catValidations.global = rejection.data.error;\n                $globalMessages.addMessages('error', rejection.data.globalErrors);\n            }\n\n            var fieldErrors = catValidations.fieldErrors = {};\n\n            if (!!rejection.data.fieldErrors) {\n                // group by field\n                _.forEach(rejection.data.fieldErrors, function (fieldError) {\n                    fieldErrors[fieldError.field] = fieldErrors[fieldError.field] || [];\n                    fieldErrors[fieldError.field].push(fieldError.message);\n                });\n                $rootScope.$on('fieldErrors', fieldErrors);\n            }\n\n        };\n\n        this.clearValidationErrors = function() {\n            delete catValidations.global;\n            catValidations.fieldErrors = {};\n        };\n\n        this.hasGlobalErrors = function() {\n            return !!catValidations.global;\n        };\n\n        this.getGlobalErrors = function() {\n            return catValidations.global;\n        };\n\n        this.hasFieldErrors = function(fieldName) {\n            return !!catValidations.fieldErrors[fieldName];\n        };\n\n        this.getFieldErrors = function(fieldName) {\n            return catValidations.fieldErrors[fieldName];\n        };\n    });\n","'use strict';\n\nangular.module('cat.service.httpIntercept')\n\n/**\n * @ngdoc service\n * @name cat.service.httpIntercept:errorHttpInterceptor\n */\n\n    .factory('errorHttpInterceptor', function CatErrorHttpInterceptor($q, $globalMessages, loadingService, catValidationService) {\n        return {\n            'request': function (config) {\n                loadingService.start();\n                return config;\n            },\n            'requestError': function (rejection) {\n                loadingService.stop();\n                return $q.reject(rejection);\n            },\n            'response': function (success) {\n                loadingService.stop();\n                return success;\n            },\n            'responseError': function (rejection) {\n                loadingService.stop();\n                $globalMessages.clearMessages('error');\n\n                if (!!rejection.data.error) {\n                    var error = '[' + rejection.status + ' - ' + rejection.statusText + '] ' + rejection.data.error;\n                    if (!!rejection.data.cause) {\n                        error += '\\n' + rejection.data.cause;\n                    }\n                    $globalMessages.addMessage('error', error);\n                }\n\n                catValidationService.updateFromRejection(rejection);\n\n                return $q.reject(rejection);\n            }\n        };\n    })\n    .config(function ($httpProvider) {\n        $httpProvider.interceptors.push('errorHttpInterceptor');\n    });\n","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.loading:loadingService\n */\nangular.module('cat.service.loading')\n    .factory('loadingService', function CatLoadingService($rootScope, usSpinnerService, $timeout) {\n        var timeout = 50;\n        var animationDuration = 200;\n        var activeCount = 0;\n        var startTime;\n        var startTimer, stopTimer;\n\n        var start = function () {\n            if (!activeCount && !startTimer) {\n                if (!!stopTimer) {\n                    $timeout.cancel(stopTimer);\n                    stopTimer = undefined;\n                }\n                startTimer = $timeout(function () {\n                    usSpinnerService.spin('loading-spinner');\n                    $rootScope.loading = true;\n                    startTime = new Date().getTime();\n                }, timeout);\n            }\n            activeCount++;\n        };\n\n        var stop = function () {\n            activeCount--;\n            if (!activeCount && !stopTimer) {\n                if (!!startTimer) {\n                    $timeout.cancel(startTimer);\n                    startTimer = undefined;\n                }\n                var now = new Date().getTime();\n                var stopTimeout = timeout + (Math.max((animationDuration - (now - startTime)), 0));\n                stopTimer = $timeout(function () {\n                    usSpinnerService.stop('loading-spinner');\n                    $rootScope.loading = false;\n                }, stopTimeout);\n            }\n        };\n\n        $rootScope.$on('$stateChangeStart', function (event) {\n            start();\n\n        });\n        $rootScope.$on('$stateChangeSuccess', function (event) {\n            stop();\n        });\n        $rootScope.$on('$stateChangeError', function (event) {\n            stop();\n        });\n\n        return {\n            start: start,\n            stop: stop\n        };\n    });\n","'use strict';\n\n/**\n * @ngdoc service\n * @name cat.service.message:$globalMessages\n */\nangular.module('cat.service.message').service('$globalMessages', function CatGlobalMessages($rootScope) {\n    var messages = {};\n\n    var self = this;\n\n    this.getMessages = function (type) {\n        if (!type) {\n            return [];\n        }\n\n        return messages[type];\n    };\n\n    this.hasMessages = function (type) {\n        if (!type) {\n            return false;\n        }\n\n        return !!messages[type] && messages[type].length !== 0;\n    };\n\n    this.clearMessages = function (type) {\n        if (!type) {\n            messages = {};\n            return;\n        }\n\n        messages[type] = [];\n    };\n\n    this.addMessage = function (type, message) {\n        if (!type) {\n            return;\n        }\n\n        if (!messages[type]) {\n            self.clearMessages(type);\n        }\n\n        messages[type].push(message);\n    };\n\n    this.addMessages = function (type, messages) {\n        if (!type) {\n            return;\n        }\n\n        _.forEach(messages, function (message) {\n            self.addMessage(type, message);\n        });\n    };\n\n    this.setMessages = function (type, messages) {\n        if (!type) {\n            return;\n        }\n\n        self.clearMessages(type);\n        if (!!messages) {\n            self.addMessages(type, messages);\n        }\n    };\n\n    $rootScope.$on('$stateChangeSuccess', function () {\n        self.clearMessages();\n    });\n});\n","/**\n * Created by tscheinecker on 26.08.2014.\n */\n'use strict';\n\nwindow.cat.util = window.cat.util || {};\n\nwindow.cat.util.pluralize = function (string) {\n    if (_.isUndefined(string) || string.length === 0) {\n        return '';\n    }\n    var lastChar = string[string.length - 1];\n\n    switch (lastChar) {\n        case 'y':\n            return string.substring(0, string.length - 1) + 'ies';\n        case 's':\n            return string + 'es';\n        default :\n            return string + 's';\n    }\n\n};\n\nwindow.cat.util.capitalize = function (string) {\n    if (_.isUndefined(string) || string.length === 0) {\n        return '';\n    }\n\n    return string.substring(0, 1).toUpperCase() + string.substring(1, string.length);\n};","/**\n * Created by tscheinecker on 01.08.2014.\n */\n\n'use strict';\n\nwindow.cat.util = window.cat.util || {};\n\nwindow.cat.models = window.cat.models || {};\n\n/**\n * This helper function is used to acquire the constructor function which is used as a 'model' for the api endpoint.\n * @param name the name of the 'entity' for which the constructor has to be returned\n * @returns {Constructor}\n */\nwindow.cat.util.defaultModelResolver = function (name) {\n    return window.cat.models[name];\n};","    }\n\n    if (!!window.reguire && !!window.require.amd && !!window.define) {\n        window.define([\n            'jQuery',\n            'lodash',\n            'angular',\n            'angular-spinner',\n            'angular-ui-bootstrap'\n        ], catAngular);\n    } else {\n        catAngular(window.angular, window.jQuery, window._);\n    }\n\n    catAngular(window.angular, window.jQuery, window._);\n\n})(window);"],"sourceRoot":"src/../"}