/*
 * Copyright 2014 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t){"use strict";t.cat={},angular.module("cat.directives",["ui.select2"]),angular.module("cat.controller",[]),angular.module("cat.template",[]),angular.module("cat.api",[]),angular.module("cat.service",["angularSpinner","ngRoute","cat.api"]),angular.module("cat",["cat.api","cat.service","cat.template","cat.directives","cat.controller"])}(window,document),function(t){"use strict";function e(n,r,i,a){var o=n+(i.url||r),s=i.model,c=i.children,u=_.memoize(function(t){var n=o+"/"+t+"/",r={};return _.forEach(_.keys(c),function(t){var i=c[t];r[t]=new e(n,t,i,a)}),r});this.res=function(t){return u(t)};var l=function(t){var e=new s(t);return _.merge(e,u(e.id))},d=function(t){var e=u(t.id);return _.forEach(_.keys(e),function(e){delete t[e]}),t};this.getEndpointUrl=function(){return o},this.list=function(e){var n=e&&e instanceof t.cat.SearchRequest?"?"+e.urlEncoded():"";return a.get(o+n).then(function(e){if(e.data.totalCount||0===e.data.totalCount){var n=[];return e.data.facets&&(n=_.map(e.data.facets,function(e){return new t.cat.Facet(e)})),{totalCount:e.data.totalCount,facets:n,elements:_.map(e.data.elements,function(t){return l(t)})}}return _.map(e.data,function(t){return l(t)})})},this.all=function(){return a.get(o+"/all").then(function(t){return _.map(t.data,function(t){return l(t)})})},this.get=function(t){return a.get(o+"/"+t).then(function(t){return l(t.data)})},this.info=function(t){return a.get(o+"/"+t+"?info").then(function(t){return t.data})},this.save=function(t){return t.id?a.put(o+"/"+t.id,d(t)).then(function(t){return l(t.data)}):a.post(o,d(t)).then(function(t){return l(t.data)})},this.remove=function(t){return a({method:"DELETE",url:o+"/"+t})}}function n(){var t="/api/",n={};this.endpoint=function(t,e){n[t]=e},this.$get=["$http",function(r){var i={};return _.forEach(_.keys(n),function(a){var o=n[a];i[a]=new e(t,a,o,r)}),i}]}angular.module("cat.api").provider("$api",n)}(window,document),function(t,e,n){"use strict";t.cat=t.cat||{},t.cat.FacetTerm=function(t){t===n&&(t={}),this.id=t.id,this.name=t.name,this.count=t.count},t.cat.Facet=function(e){e===n&&(e={}),this.name=e.name,this.terms=_.map(e.facets,function(e){return new t.cat.FacetTerm(e)})}}(window,document),function(t,e,n){"use strict";t.cat=t.cat||{},t.cat.SearchRequest=function(t){var e,r={page:1,size:100},i={},a={};t&&!_.isEmpty(t)&&(r.page=t.page||r.page,r.size=t.size||r.size,i.property=t.sort||i.property,i.isDesc=t.rev||i.isDesc,_.forEach(_.keys(t),function(e){e.indexOf("search.")>-1&&e.length>7&&(a[e.substring(7)]=t[e])}));var o=function(){return i.property?"sort="+i.property+":"+(i.isDesc===!0||"true"===i.isDesc?"desc":"asc"):""},s=function(){return"page="+(r.page?Math.max(0,r.page-1):0)+"&size="+r.size||100},c=function(t,e){return t?e?t+"&"+e:t:e},u=function(){return a&&!_.isEmpty(a)?_.reduce(_.map(_.keys(a),function(t){var e=a[t];return _.isUndefined(e)||_.isNull(e)?n:_.isString(e)&&(e=e.trim(),0===e.length)?n:t+"="+e}),c):""},l=function(){return _([s(),o(),u()]).reduce(c)};this.pagination=function(t){return t===n?r:r=t},this.sort=function(t){return t===n?i:i=t},this.search=function(t){return t===n?a:a=t},this.urlEncoded=function(){return e=l()},this.isDirty=function(){return e!==l()},this.setSearch=function(t){var e={};e.page=r.page,e.size=r.size,i.property&&(e.sort=i.property,e.rev=i.isDesc||!1),_.forEach(_.keys(a),function(t){e["search."+t]=a[t]}),t.search(e)}}}(window,document),function(){"use strict";angular.module("cat").directive("catAutofocus",function(t){return{restrict:"A",link:function(e,n){t(function(){n[0].focus()},100)}}})}(window,document),function(){"use strict";angular.module("cat").directive("catCheckbox",function(){return{replace:!0,restrict:"E",scope:{checked:"="},link:function(t,e){e.addClass(t.checked?"glyphicon glyphicon-check":"glyphicon glyphicon-unchecked")}}})}(window,document),function(t){"use strict";angular.module("cat").directive("catConfirmClick",function(){return{restrict:"A",link:function(e,n,r){var i=r.catConfirmClick||"Are you sure?",a=r.catOnConfirm;n.bind("click",function(){t.confirm(i)&&e.$eval(a)})}}})}(window,document),function(t,e,n){"use strict";angular.module("cat").directive("catFacets",function(){return{replace:!0,restrict:"E",scope:{facets:"=",names:"="},templateUrl:"template/cat-facets.tpl.html",link:function(t){if(t.facets===n)throw"Attribute facets must be set!"},controller:function(e,r,i){e.isActive=function(t,e){var n=r.search(),i="search."+t.name;return n[i]?!!e&&n[i]===e.id:!0},e.showAll=function(e){var n=new t.cat.SearchRequest(r.search()).search();delete n[e.name],i.$broadcast("SearchChanged",n)},e.facetName=function(t){return e.names!==n&&e.names[t.name]!==n?e.names[t.name]:t.name},e.setActive=function(e,n){e.activeTerm=n;var a=new t.cat.SearchRequest(r.search()).search();a[e.name]=n.id,i.$broadcast("SearchChanged",a)},e.remove=function(e){var n=new t.cat.SearchRequest(r.search()).search();delete n[e.name],i.$broadcast("SearchChanged",n)},e.showItem=function(t,n){return e.isActive(t)||e.isActive(t,n)}}}})}(window,document),function(){"use strict";angular.module("cat").directive("catFieldErrors",function(){return{replace:"true",restrict:"E",scope:{errors:"=",name:"@"},template:'<div class="label label-danger" ng-if="errors[name]"><ul><li ng-repeat="error in errors[name]">{{error}}</li></ul></div>'}})}(window,document),function(){"use strict";angular.module("cat").directive("input",function(){return{require:"ngModel",restrict:"E",link:function(t,e,n,r){t.$on("fieldErrors",function(t,e){if(e&&n.id){var i=!e[n.id];r.$setValidity(n.id,i)}})}}}).directive("catInputGroup",function(){return{restrict:"A",transclude:!0,scope:{errors:"=",label:"@",name:"@"},link:function(t,e){e.addClass("form-group")},templateUrl:"template/cat-input.tpl.html"}})}(window,document),function(){"use strict";angular.module("cat").directive("catLoadMore",function(){return{replace:!0,restrict:"A",link:function(t,e,n){var r=parseInt(n.catLoadMore);if(t.$parent.elementsCount=t.$parent.elementsCount||r,t.$parent.elements=t.$parent.elements||[],t.$parent.elements.push(e),t.$parent.elements.length>t.$parent.elementsCount&&e.addClass("hidden"),!e.parent().next().length&&t.$parent.elements.length>t.$parent.elementsCount){var i=$('<a href="#">Show more</a>');i.on({click:function(){return t.$parent.elementsCount+=r,t.$parent.elements.length<=t.$parent.elementsCount&&i.addClass("hidden"),t.$parent.elements.forEach(function(e,n){n<t.$parent.elementsCount&&e.removeClass("hidden")}),!1}}),e.parent().after(i)}}}})}(window,document),function(){"use strict";angular.module("cat").directive("catMainMenu",["$mainMenu","$rootScope",function(t,e){return{restrict:"E",scope:{},link:function(n){n.menus=t.getMenus(),n.isVisible=function(t){var e=!1;return t.isMenu()||t.isGroup()?(_.forEach(t.getEntries(),function(t){e=e||n.isVisible(t)}),t.isMenu()&&_.forEach(t.getGroups(),function(t){e=e||n.isVisible(t)}),e):n.isAllowed(t)},n.isAllowed=function(t){var n=t.getOptions().rights;if(n){if(_.isArray(n)){for(var r=!0,i=0;i<n.length;i++)r=r&&e.isAllowed(n[i]);return r}return e.isAllowed(n)}return!0}},templateUrl:"template/cat-main-menu.tpl.html"}}])}(window,document),function(){"use strict";angular.module("cat").directive("catPaginated",function(){return{replace:!0,restrict:"E",transclude:!0,scope:{listData:"=?"},templateUrl:"template/cat-paginated.tpl.html",link:function(t,e,n){n.searchProps&&(t.searchProps=_.filter(n.searchProps.split(","),function(t){return!!t}))},controller:function(t,e,n,r,i){var a=null,o=500;if(_.isUndefined(t.listData)&&(t.listData=t.$parent.listData,_.isUndefined(t.listData)))throw new Error("listData was not defined and couldn't be found with default value");t.listData.search=t.listData.search||t.listData.searchRequest.search()||{};var s=t.listData.searchRequest,c=function(e){r.cancel(a),a=r(function(){s.isDirty()&&n.load(t.listData.endpoint,s).then(function(e){_.assign(t.listData,e)})},e||0)};t.$watch("listData.sort",function(e){e&&(console.log("broadcasting sort changed: "+angular.toJson(e)),t.$parent.$broadcast("SortChanged",e))},!0),t.$on("SearchChanged",function(t,e,n){u(e,n)}),t.$watch("listData.pagination",function(){s.setSearch(e),c()},!0);var u=function(n,r){s.search(n),s.setSearch(e),t.listData.pagination.page=1,c(r)},l=function(t){var e=s.search();_.assign(e,t),i.$broadcast("SearchChanged",e,o)};t.$watch("listData.search",l,!0),t.$on("SortChanged",function(n,r){s.sort(r),s.setSearch(e),t.listData.pagination.page=1,c()})}}})}(window,document),function(t){"use strict";angular.module("cat").directive("catSelect",function(e,n){var r=function(e,n){return function(r){var i=new t.cat.SearchRequest(r.data);return i.sort(n||{property:"name",isDesc:!1}),e.list(i).then(r.success)}};return{restrict:"EA",replace:!0,priority:1,scope:{options:"=",id:"@"},link:function(t,e){e.addClass("form-control")},controller:function(t){var i,a,o=t.options.search||function(t){return{"search.name":t}},s=t.options.filter||function(){return!0};if("[object Array]"===Object.prototype.toString.call(t.options.endpoint))i=function(e){return e.success({elements:t.options.endpoint})},a=0;else{var c=n[t.options.endpoint];if(!c)return e.error('No api endpoint "'+t.options.endpoint+'" defined'),void(t.elements=[]);i=r(c,t.options.sort),a=500}t.selectOptions=_.assign({placeholder:" ",minimumInputLength:0,adaptDropdownCssClass:function(t){return _.contains(["ng-valid","ng-invalid","ng-pristine","ng-dirty"],t)?t:null},ajax:{data:o,quietMillis:a,transport:i,results:function(t){return{results:_.filter(t.elements,s)}}},formatResult:function(t){return t.name},formatSelection:function(t){return t.name}},t.options["ui-select2"])},template:'<input type="text" ui-select2="selectOptions">'}})}(window,document),function(){"use strict";angular.module("cat").directive("catSortable",function(t){return{restrict:"AC",link:function(e,n,r){var i=n.text(),a=r.catSortable||i.toLowerCase().trim();e.sort=e.listData.searchRequest.sort();var o="glyphicon-sort-by-attributes";r.sortMode&&("numeric"===r.sortMode?o="glyphicon-sort-by-order":"alphabet"===r.sortMode&&(o="glyphicon-sort-by-alphabet")),n.text(""),n.append(t('<a class="sort-link" href="" ng-click="toggleSort(\''+a+"')\">"+i+' <span class="glyphicon" ng-class="{\''+o+"': sort.property == '"+a+"' && !sort.isDesc, '"+o+"-alt': sort.property == '"+a+"' && sort.isDesc}\"></span></a>")(e))},controller:function(t){t.toggleSort=function(e){t.sort.property===e?t.sort.isDesc=!t.sort.isDesc:(t.sort.property=e,t.sort.isDesc=!1),t.$parent.$broadcast("SortChanged",t.sort)},t.$on("SortChanged",function(e,n){t.sort=n})}}})}(window,document),function(t){"use strict";angular.module("cat").directive("form",["$timeout",function(e){return{restrict:"E",scope:!0,require:"form",link:function(n,r,i,a){var o=i.eocsWarnOnNavIfDirty||"You have unsaved changes. Leave the page?";e(function(){a.$setPristine(!0)},50),n.$on("formReset",function(){a.$setPristine(!0)}),n.$on("formDirty",function(){a.$setDirty(!0)}),n.$on("$locationChangeStart",function(e){a.$dirty&&(t.confirm(o)||e.preventDefault())}),$(t).on("beforeunload",function(){return a.$dirty?o:void 0}),n.$on("$destroy",function(){$(t).unbind("beforeunload")})}}}])}(window,document),function(){"use strict";angular.module("cat").directive("numbersOnly",function(){return{require:"ngModel",link:function(t,e,n,r){r.$parsers.push(function(t){if(!t)return"";var e="[^0-9]";n.hasOwnProperty("allowFraction")&&(e="[^0-9,.]");var i=t.replace(new RegExp(e,"g"),"");return i!==t&&(r.$setViewValue(i),r.$render()),i})}}})}(window,document),function(t,e,n){"use strict";function r(t,e,r,i,a,o,s,c,u,l){t.detail=u,t.editDetail=n,t.$fieldErrors={};var d=c.endpoint,f=c.baseUrl,p=c.templateUrls,h=c.Model;t.uiStack=c.uiStack,t.editTemplate=p.edit,_.isObject(p.view)?(t.mainViewTemplate=p.view.main,t.additionalViewTemplate=p.view.additional):t.mainViewTemplate=p.view,t.baseUrl=f,t.title=function(){var e=t.detail;return _.isUndefined(e)?"":e.breadcrumbTitle?e.breadcrumbTitle():e.name?e.name:e.id};var m=function(){r.replaceLast({title:t.title()})},g=function(){d.get(e.id).then(function(e){t.detail=e,m()})};t.reloadDetails=g,t.exists=!!e.id&&"new"!==e.id,t.add=function(){t.editDetail=new h},t.edit=function(){t.editDetail=angular.copy(t.detail)},t.cancelEdit=function(){t.$broadcast("formReset"),t.exists?(t.editDetail=n,o.clearMessages(),t.$fieldErrors=n):a.history.back()},t.remove=function(){d.remove(t.detail.id).then(function(){i.path(f)})},t.save=function(){d.save(t.editDetail).then(function(e){o.clearMessages(),t.$fieldErrors=n,t.exists?(t.editDetail=n,t.detail=e,m()):(t.$broadcast("formReset"),i.path(f+"/"+e.id))},function(e){if(!e.data.fieldErrors)return void(t.$fieldErrors=n);var r={};_.forEach(e.data.fieldErrors,function(t){r[t.field]=r[t.field]||[],r[t.field].push(t.message)}),t.$fieldErrors=r,t.$broadcast("fieldErrors",r)})},t.exists?_.isUndefined(t.detail)?g():m():_.isUndefined(t.detail)?t.add():t.edit(),s(c.controller,{$scope:t,detail:u,parent:l,config:c})}angular.module("cat").controller("CatBaseDetailController",r)}(window,document),function(t,e,n){"use strict";angular.module("cat").filter("replaceText",function(){return function(t,e,r,i){return e===n&&(e="\n"),r===n&&(r="g"),i===n&&(i=", "),t?String(t).replace(new RegExp(e,r),i):t}})}(window,document),function(t){"use strict";t.cat.util=t.cat.util||{},t.cat.models=t.cat.models||{},t.cat.util.defaultModelResolver=function(e){return t.cat.models[e]};var e=function(t){return t?t.toLowerCase():""},n=function(t){var n=e(t.name);return{templateUrl:t.templateUrl||n+"/"+n+"-list.tpl.html",controller:t.controller||t.name+"Controller",reloadOnSearch:!1,resolve:{listData:["catListDataLoadingService",function(e){return e.resolve(t.endpoint||n,t.defaultSort)}]}}},r=function(n){var r,i;_.isString(n.endpoint)?r=n.endpoint:_.isObject(n.endpoint)?(i=n.endpoint.parent,r=n.endpoint.name):r=e(n.name);var a=n.model||t.cat.util.defaultModelResolver(n.name),o=i?i+"/":"",s=i?i+"-":"",c={edit:o+r+"/"+s+r+"-details-edit.tpl.html",view:o+r+"/"+s+r+"-details-view.tpl.html"};return n.additionalViewTemplate===!0&&(c.view={main:c.view,additional:o+r+"/"+s+r+"-additional-details-view.tpl.html"}),{templateUrl:n.templateUrl||"template/base-detail.tpl.html",controller:"CatBaseDetailController",reloadOnSearch:n.reloadOnSearch,resolve:{config:function(t,e){var o=e.current.originalPath,s=t[r];_.isUndefined(i)||(s=t[i].res(e.current.params[n.endpoint.id])[r]);var u=n.baseUrl;if(_.isUndefined(u)){var l=o.substring(0,o.lastIndexOf("/"));u=_.isUndefined(i)?l:l.replace(":"+n.endpoint.id,e.current.params[n.endpoint.id])}return{controller:n.controller||n.name+"DetailsController",endpoint:s,Model:a,templateUrls:c,baseUrl:u}},parent:["$api","$route",function(t,e){return _.isUndefined(i)?null:t[i].info(e.current.params[n.endpoint.id])}],detail:["$api","$route",function(t,e){var o=e.current.params.id;return"new"===o?new a:_.isUndefined(i)?t[r].get(o):t[i].res(e.current.params[n.endpoint.id])[r].get(o)}]}}};t.cat.util.route={list:n,detail:r}}(window,document),function(){"use strict";angular.module("cat.service").service("$breadcrumbs",function(){var t=[];this.clear=function(){t=[]},this.set=function(e){t=e},this.get=function(){return t},this.push=function(e){t.push(e)},this.pop=function(){t.pop()},this.length=function(){return t.length},this.replaceLast=function(e){t[t.length-1]=e}})}(window,document),function(t){"use strict";angular.module("cat.service").factory("catListDataLoadingService",["$api","$route","$q",function(e,n,r){var i=function(t,e){var n=r.defer();return t.list(e).then(function(r){var i=e.pagination();n.resolve({count:r.totalCount,collection:r.elements,pagination:i,firstResult:(i.page-1)*i.size+1,lastResult:Math.min(i.page*i.size,r.totalCount),facets:r.facets,isSinglePageList:r.totalCount<=i.size,endpoint:t,searchRequest:e})},function(t){n.reject(t)}),n.promise},a=function(r,a){var o=new t.cat.SearchRequest(n.current.params);return a||(a={property:"name",isDesc:!1}),a&&!n.current.params.sort&&o.sort(a),i(e[r],o)};return{load:i,resolve:a}}])}(window,document),function(t){"use strict";function e(e){var n=[];this.listAndDetailRoute=function(r,i,a){n.push(i);var o=r+"/"+i.toLowerCase()+"s";a&&a.url&&(o=r+"/"+a.url||o);var s=a?a.list:{},c=a?a.details:{},u={name:i};e.when(o,t.cat.util.route.list(_.assign({},u,s))).when(o+"/:id",t.cat.util.route.detail(_.assign({},u,c)))},this.$get=function(){return n}}angular.module("cat.service").provider("catRouteService",e)}(window,document),function(t){"use strict";function e(e,n){var r=[],i=[];this.listAndDetailView=function(a,o,s){var c=o.toLowerCase(),u=c+"s";s&&(u=s.url||u);var l={model:t.cat.util.defaultModelResolver(o),url:u};s&&(l=_.assign(l,s.endpoint)),r.push(o),i.push(c),n.endpoint(o.toLowerCase(),l),e.listAndDetailRoute(a,o,s)},this.$get=function(){return{views:r,endpoints:i}}}angular.module("cat.service").provider("catViewService",e)}(window,document),function(){"use strict";angular.module("cat.service").factory("errorHttpInterceptor",function(t,e,n){return{request:function(t){return n.start(),t},requestError:function(e){return n.stop(),t.reject(e)},response:function(t){return n.stop(),t},responseError:function(r){if(n.stop(),e.clearMessages("error"),r.data.error){var i="["+r.status+" - "+r.statusText+"] "+r.data.error;r.data.cause&&(i+="\n"+r.data.cause),e.addMessage("error",i)}return r.data.globalErrors&&e.addMessages("error",r.data.globalErrors),t.reject(r)}}}).config(function(t){t.interceptors.push("errorHttpInterceptor")})}(window,document),function(t,e,n){"use strict";angular.module("cat.service").factory("loadingService",function(t,e,r){var i,a,o,s=50,c=200,u=0,l=function(){u||a||(o&&(r.cancel(o),o=n),a=r(function(){e.spin("loading-spinner"),t.loading=!0,i=(new Date).getTime()},s)),u++},d=function(){if(u--,!u&&!o){a&&(r.cancel(a),a=n);var l=(new Date).getTime(),d=s+Math.max(c-(l-i),0);o=r(function(){e.stop("loading-spinner"),t.loading=!1},d)}};return t.$on("$routeChangeStart",function(){l()}),t.$on("$routeChangeSuccess",function(){d()}),t.$on("$routeChangeError",function(){d()}),{start:l,stop:d}})}(window,document),function(t,e,n){"use strict";function r(t,e){this.id=t;var n=e;this.getOptions=function(){return n},this.isGroup=function(){return!1},this.isMenu=function(){return!1}}function i(t,e){this.id=t;var n=[],i=e;this.addMenuEntry=function(t,e){n.push(new r(t,e))},this.getOptions=function(){return i},this.getEntries=function(){return _.sortBy(n,function(t){return t.getOptions().sortOrder||1e4})},this.isGroup=function(){return!0},this.isMenu=function(){return!1}}function a(t,e){this.id=t;var n=[],a={},o=e;this.addMenuGroup=function(t,e){a[t]=new i(t,e)},this.addMenuEntry=function(t,e,i){_.isUndefined(t)?n.push(new r(e,i)):a[t].addMenuEntry(e,i)},this.getGroups=function(){return _.sortBy(_.map(a,function(t){return t}),function(t){return t.getOptions().sortOrder||1e4})},this.getEntries=function(t){return _.isUndefined(t)?_.sortBy(n,function(t){return t.getOptions().sortOrder||1e4}):a[t].getEntries()},this.getFlattened=function(){return _.flatten([n,_.map(this.getGroups(),function(t){return[t,t.getEntries()]})])},this.isMenu=function(){return!0},this.isGroup=function(){return!1},this.getOptions=function(){return o}}function o(t,e){this.id=t;var n={},r=e;this.addMenu=function(t,e){n[t]=new a(t,e)},this.addMenuGroup=function(t,e,r){n[t].addMenuGroup(e,r)},this.addMenuEntry=function(t,e,r,i){n[t].addMenuEntry(e,r,i)},this.getMenus=function(){return _.map(n,function(t){return t})},this.getOptions=function(){return r}}function s(){var t=new o("main.menu",{}),e=[],r=[],i=[];this.menu=function(t,n){e.push({menuId:t,options:n})},this.menuGroup=function(t,e,n){r.push({menuId:t,groupId:e,options:n})},this.menuEntry=function(t,e,r,a){_.isUndefined(a)&&(a=r,r=e,e=n),i.push({menuId:t,groupId:e,entryId:r,options:a})},this.$get=function(){return _.forEach(e,function(e){t.addMenu(e.menuId,e.options)}),_.forEach(r,function(e){t.addMenuGroup(e.menuId,e.groupId,e.options)}),_.forEach(i,function(e){t.addMenuEntry(e.menuId,e.groupId,e.entryId,e.options)}),t}}angular.module("cat.service").provider("$mainMenu",s)}(window,document),function(){"use strict";angular.module("cat.service").service("$globalMessages",function(t){var e={},n=this;this.getMessages=function(t){return t?e[t]:[]},this.hasMessages=function(t){return t?!!e[t]&&0!==e[t].length:!1},this.clearMessages=function(t){return t?void(e[t]=[]):void(e={})},this.addMessage=function(t,r){t&&(e[t]||n.clearMessages(t),e[t].push(r))},this.addMessages=function(t,e){t&&_.forEach(e,function(e){n.addMessage(t,e)})},this.setMessages=function(t,e){t&&(n.clearMessages(t),e&&n.addMessages(t,e))},t.$on("$routeChangeSuccess",function(){n.clearMessages()})})}(window,document);